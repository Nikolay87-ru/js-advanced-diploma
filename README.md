# Дипломное задание к курсу «Продвинутый JavaScript». Retro Game"

![Game](/src/img/readme_img/game.png)

## Технологический стек
- **Babel** (v7.27) - компилятор ES6+
- **Webpack** (v5.99) - сборщик проекта
- **ESLint** (v9.27) + **Prettier** (v3.5) - линтинг и форматирование
- **Core-JS** (v3.42) - полифиллы для ES6+
- **Jest** (v29.7) - тестирование
- **AppVeyor** - CI/CD

***

## [Условия задачи](https://github.com/netology-code/js-advanced-diploma "Ссылка на задание по дипломному проекту")

### Выполненные задачи

### 1. Настройка проекта
- [x] Конфигурация Webpack с поддержкой:
  - Asset Modules для изображений
  - Babel-loader для транспиляции
  - DevServer с hot reload
- [x] Настройка ESLint с правилами Airbnb + Prettier
- [x] Подключение Core-JS для полифиллов
- [x] Конфигурация Jest + AppVeyor для CI

### 2. Реализация заданий

#### Модуль `GameController`

- [x] Отрисовка игрового поля:
    - Реализована инициализация игры через метод `init()`
    - Поддержка тем оформления (prairie, desert, arctic, mountain)
    - Корректная привязка к DOM-элементу

- [x] Генерация и размещение команд:
    - Ограничение до 3 персонажей на команду
    - Разделение на команду игрока (столбцы 1-2) и противника (столбцы 7-8)
    - Уникальное позиционирование персонажей без пересечений

- [x] Система уровней персонажей:
    - Поддержка уровней от 1 до 4
    - Случайный подбор уровней в заданном диапазоне

#### Модуль `Character` и классы персонажей

- [x] Базовый класс **Character**:
    - Запрет прямого создания экземпляров (через `new.target`)
    - Базовые свойства: level, attack, defence, health, type

- [x] Классы персонажей игрока:
    - Bowman (25 атаки, 25 защиты)
    - Swordsman (40 атаки, 10 защиты)
    - Magician (10 атаки, 40 защиты)

- [x] Классы персонажей противника:
    - Daemon (10 атаки, 40 защиты)
    - Undead (40 атаки, 10 защиты)
    - Vampire (25 атаки, 25 защиты)

#### Модуль `generators`

- [x] **characterGenerator**:
    - Бесконечная генерация персонажей случайных типов
    - Поддержка указанного диапазона уровней
    - Строгое соблюдение списка allowedTypes

- [x] **generateTeam**:
    - Формирование команд заданного размера
    - Возврат экземпляров класса Team
    - Корректная обработка граничных случаев (0 персонажей)

#### Модуль `utils`

- [x] **calcTileType**
    - Определение типа ячейки (углы, границы, центр)
    - Поддержка полей разных размеров
    - Полное покрытие тестами

***

#### Авто-тесты 

- [x] Тесты модуля `utils.test`:
    - Проверка правильности определения типов ячеек
    - Тестирование граничных случаев

- [x] Тесты модуля `character.test`:
  
`inherited classes should not throw errors` - проверяет, что классы-наследники создаются без ошибок.

`Character level 1 stats` - проверяет базовые характеристики персонажей 1 уровня:
  - Атака находится в указанном диапазоне
  - Защита соответствует ожидаемому значению
  - Здоровье равно 50
  - Уровень равен 1

`characterGenerator` - проверяет генератор персонажей:
  - Генерирует бесконечную последовательность персонажей
  - Генерирует только разрешенные типы персонажей
  - Генерирует персонажей с корректными уровнями

`generateTeam` - проверяет генерацию команды:
  - Создает команду с правильным количеством персонажей
  - Персонажи имеют корректные уровни
  - В команду попадают только разрешенные типы
  - Корректно обрабатывает нулевое количество персонажей


- [x] Тесты модуля `gamecontroller.test.js`:

### Тесты для метода `onCellEnter`:

`should show tooltip with correct character info when entering cell with character` - проверяет:
  - Установку курсора в `pointer` при наведении на персонажа
  - Показ tooltip с информацией о персонаже
  - Содержимое tooltip (тип, уровень, здоровье)

`should not show tooltip when entering empty cell` - проверяет:
  - Установку курсора в `default` при наведении на пустую клетку
  - Скрытие tooltip для пустой клетки
  - Отсутствие показа нового tooltip

`should not show green selection when entering selected character cell` - проверяет:
  - Отсутствие выделения зеленым уже выбранного персонажа
  - Показ tooltip для выбранного персонажа

### Тесты для конкретных персонажей:

#### Bowman:
`should have correct attack range and movement` - проверяет:
  - Дальность атаки (3 клетки)
  - Дальность перемещения (4 клетки)
  - Стоимость перемещения по прямой и диагонали

`should calculate attack damage correctly` - проверяет:
  - Диапазон урона обычной атаки (15-25)
  - Стоимость атаки (1 очко)

`should calculate hard attack damage correctly` - проверяет:
  - Диапазон урона усиленной атаки (20-30)
  - Стоимость атаки (2 очка)

#### Swordsman:
`should have correct attack range and movement` - проверяет:
  - Дальность атаки (1 клетка)
  - Дальность перемещения (4 клетки)

`should calculate high melee damage` - проверяет:
  - Диапазон урона (30-40)

#### Magician:
`should have correct attack range and movement costs` - проверяет:
  - Дальность атаки (4 клетки)
  - Дальность перемещения (2 клетки)
  - Стоимость перемещения по прямой и диагонали

`should have resurrect ability` - проверяет:
  - Наличие способности воскрешения
  - Количество восстанавливаемого здоровья (50)
  - Стоимость способности (2 очка)

#### Daemon:
`should have correct attack range and movement` - проверяет:
  - Дальность атаки (2 клетки)
  - Дальность перемещения (2 клетки)
  - Принадлежность к команде врагов

`should calculate high damage with critical chance` - проверяет:
  - Диапазон урона (20-30)

#### Undead:
`should have correct attack range and movement` - проверяет:
  - Дальность атаки (2 клетки)
  - Дальность перемещения (4 клетки)

`should calculate very high damage` - проверяет:
  - Диапазон урона (30-40)

#### Vampire:
`should have correct attack range and movement` - проверяет:
  - Дальность атаки (2 клетки)
  - Дальность перемещения (2 клетки)

`should calculate damage with critical chance` - проверяет:
  - Диапазон урона (10-20)

### Тесты механик:

`should calculate correct move cost for different characters` - проверяет:
  - Расчет стоимости перемещения для разных персонажей
  - Разницу в стоимости прямого и диагонального перемещения

`should generate correct path for movement` - проверяет:
  - Корректность генерации пути перемещения
  - Включение ключевых точек пути

`should perform attack with correct damage calculation` - проверяет:
  - Нанесение урона врагу
  - Отображение анимации урона
  - Корректность работы системы здоровья

`should not allow attack when out of range` - проверяет:
  - Блокировку атаки при слишком большом расстоянии
  - Показ сообщения об ошибке

`should apply defence bonus correctly` - проверяет:
  - Увеличение показателя защиты
  - Обнуление очков действий после защиты
  - Показ сообщения об усилении защиты

###### Статус прокрытия кода тестами:
[![Build status](https://ci.appveyor.com/api/projects/status/t6stdwsxbhqq80fs?svg=true)](https://ci.appveyor.com/project/Nikolay87-ru/js-advanced-diploma)