{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://js-advanced-diploma/./src/css/style.css","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://js-advanced-diploma/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://js-advanced-diploma/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://js-advanced-diploma/./node_modules/css-loader/dist/runtime/api.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://js-advanced-diploma/webpack/bootstrap","webpack://js-advanced-diploma/webpack/runtime/compat get default export","webpack://js-advanced-diploma/webpack/runtime/define property getters","webpack://js-advanced-diploma/webpack/runtime/global","webpack://js-advanced-diploma/webpack/runtime/hasOwnProperty shorthand","webpack://js-advanced-diploma/webpack/runtime/publicPath","webpack://js-advanced-diploma/webpack/runtime/jsonp chunk loading","webpack://js-advanced-diploma/webpack/runtime/nonce","webpack://js-advanced-diploma/./src/css/style.css?9fcd","webpack://js-advanced-diploma/./src/js/utils.js","webpack://js-advanced-diploma/./src/js/Character.js","webpack://js-advanced-diploma/./src/js/PositionedCharacter.js","webpack://js-advanced-diploma/./src/js/Team.js","webpack://js-advanced-diploma/./src/js/generators.js","webpack://js-advanced-diploma/./src/js/GameState.js","webpack://js-advanced-diploma/./src/js/GameStateService.js","webpack://js-advanced-diploma/./src/js/characters/Bowman.js","webpack://js-advanced-diploma/./src/js/characters/Swordsman.js","webpack://js-advanced-diploma/./src/js/characters/Magician.js","webpack://js-advanced-diploma/./src/js/characters/Daemon.js","webpack://js-advanced-diploma/./src/js/characters/Undead.js","webpack://js-advanced-diploma/./src/js/characters/Vampire.js","webpack://js-advanced-diploma/./src/js/app.js","webpack://js-advanced-diploma/./src/js/GamePlay.js","webpack://js-advanced-diploma/./src/js/GameController.js"],"sourcesContent":["\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"../img/prairie/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"../img/prairie/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"../img/prairie/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"../img/prairie/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"../img/prairie/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_5___ = new URL(\"../img/prairie/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_6___ = new URL(\"../img/prairie/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_7___ = new URL(\"../img/prairie/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_8___ = new URL(\"../img/prairie/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_9___ = new URL(\"../img/desert/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_10___ = new URL(\"../img/desert/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_11___ = new URL(\"../img/desert/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_12___ = new URL(\"../img/desert/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_13___ = new URL(\"../img/desert/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_14___ = new URL(\"../img/desert/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_15___ = new URL(\"../img/desert/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_16___ = new URL(\"../img/desert/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_17___ = new URL(\"../img/desert/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_18___ = new URL(\"../img/arctic/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_19___ = new URL(\"../img/arctic/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_20___ = new URL(\"../img/arctic/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_21___ = new URL(\"../img/arctic/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_22___ = new URL(\"../img/arctic/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_23___ = new URL(\"../img/arctic/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_24___ = new URL(\"../img/arctic/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_25___ = new URL(\"../img/arctic/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_26___ = new URL(\"../img/arctic/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_27___ = new URL(\"../img/mountain/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_28___ = new URL(\"../img/mountain/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_29___ = new URL(\"../img/mountain/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_30___ = new URL(\"../img/mountain/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_31___ = new URL(\"../img/mountain/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_32___ = new URL(\"../img/mountain/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_33___ = new URL(\"../img/mountain/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_34___ = new URL(\"../img/mountain/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_35___ = new URL(\"../img/mountain/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_36___ = new URL(\"../img/characters/moving.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_37___ = new URL(\"../img/characters/bowman.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_38___ = new URL(\"../img/characters/daemon.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_39___ = new URL(\"../img/characters/magician.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_40___ = new URL(\"../img/characters/swordsman.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_41___ = new URL(\"../img/characters/undead.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_42___ = new URL(\"../img/characters/vampire.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_43___ = new URL(\"../img/characters/zombie.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_44___ = new URL(\"../img/characters/dead.png\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\nvar ___CSS_LOADER_URL_REPLACEMENT_9___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_9___);\nvar ___CSS_LOADER_URL_REPLACEMENT_10___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_10___);\nvar ___CSS_LOADER_URL_REPLACEMENT_11___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_11___);\nvar ___CSS_LOADER_URL_REPLACEMENT_12___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_12___);\nvar ___CSS_LOADER_URL_REPLACEMENT_13___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_13___);\nvar ___CSS_LOADER_URL_REPLACEMENT_14___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_14___);\nvar ___CSS_LOADER_URL_REPLACEMENT_15___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_15___);\nvar ___CSS_LOADER_URL_REPLACEMENT_16___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_16___);\nvar ___CSS_LOADER_URL_REPLACEMENT_17___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_17___);\nvar ___CSS_LOADER_URL_REPLACEMENT_18___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_18___);\nvar ___CSS_LOADER_URL_REPLACEMENT_19___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_19___);\nvar ___CSS_LOADER_URL_REPLACEMENT_20___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_20___);\nvar ___CSS_LOADER_URL_REPLACEMENT_21___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_21___);\nvar ___CSS_LOADER_URL_REPLACEMENT_22___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_22___);\nvar ___CSS_LOADER_URL_REPLACEMENT_23___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_23___);\nvar ___CSS_LOADER_URL_REPLACEMENT_24___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_24___);\nvar ___CSS_LOADER_URL_REPLACEMENT_25___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_25___);\nvar ___CSS_LOADER_URL_REPLACEMENT_26___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_26___);\nvar ___CSS_LOADER_URL_REPLACEMENT_27___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_27___);\nvar ___CSS_LOADER_URL_REPLACEMENT_28___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_28___);\nvar ___CSS_LOADER_URL_REPLACEMENT_29___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_29___);\nvar ___CSS_LOADER_URL_REPLACEMENT_30___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_30___);\nvar ___CSS_LOADER_URL_REPLACEMENT_31___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_31___);\nvar ___CSS_LOADER_URL_REPLACEMENT_32___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_32___);\nvar ___CSS_LOADER_URL_REPLACEMENT_33___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_33___);\nvar ___CSS_LOADER_URL_REPLACEMENT_34___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_34___);\nvar ___CSS_LOADER_URL_REPLACEMENT_35___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_35___);\nvar ___CSS_LOADER_URL_REPLACEMENT_36___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_36___);\nvar ___CSS_LOADER_URL_REPLACEMENT_37___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_37___);\nvar ___CSS_LOADER_URL_REPLACEMENT_38___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_38___);\nvar ___CSS_LOADER_URL_REPLACEMENT_39___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_39___);\nvar ___CSS_LOADER_URL_REPLACEMENT_40___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_40___);\nvar ___CSS_LOADER_URL_REPLACEMENT_41___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_41___);\nvar ___CSS_LOADER_URL_REPLACEMENT_42___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_42___);\nvar ___CSS_LOADER_URL_REPLACEMENT_43___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_43___);\nvar ___CSS_LOADER_URL_REPLACEMENT_44___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_44___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root {\\r\\n  --cell-size: 64px;\\r\\n}\\r\\n\\r\\nhtml, body {\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  background: #000;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\n.btn {\\r\\n  display: inline-block;\\r\\n  font-weight: 400;\\r\\n  color: #212529;\\r\\n  background-color: #f8f9fa;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n  padding: .375rem .75rem;\\r\\n  font-size: 1rem;\\r\\n  line-height: 1.5;\\r\\n  border-radius: .25rem;\\r\\n  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n\\r\\n  &:hover {\\r\\n    background-color:rgb(195, 197, 199);\\r\\n    transition: color 0.2s;\\r\\n  }\\r\\n}\\r\\n\\r\\n.controls {\\r\\n  text-align: center;\\r\\n  margin: 50px 0;\\r\\n}\\r\\n\\r\\n.game-info {\\r\\n  background-color: #000;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n.turn-indicator {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.game-message {\\r\\n  color: #4CAF50;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n.game-error {\\r\\n  color: #F44336;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n#game-board {\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n.board-container {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  flex-wrap: wrap;\\r\\n}\\r\\n\\r\\n.board {\\r\\n  display: grid;\\r\\n  grid-template-columns: repeat(8, 1fr);\\r\\n  grid-column-gap: 2px;\\r\\n  grid-row-gap: 2px;\\r\\n}\\r\\n\\r\\n.cell {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.cell.selected::before {\\r\\n  content: '';\\r\\n  display: block;\\r\\n  border: 4px;\\r\\n  border-radius: 32px;\\r\\n  box-sizing: border-box;\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  opacity: 0.9;\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n.cell.selected-yellow::before {\\r\\n  border-color: #ff0;\\r\\n  border-style: solid;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-green::before {\\r\\n  border-color: #0f0;\\r\\n  border-style: dashed;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-red::before {\\r\\n  border-color: #f00;\\r\\n  border-style: dashed;\\r\\n}\\r\\n\\r\\n.cell:hover {\\r\\n  cursor: default;\\r\\n}\\r\\n\\r\\n.cell:hover .custom-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.custom-tooltip {\\r\\n  position: absolute;\\r\\n  z-index: 9999;\\r\\n  bottom: 100%;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  background-color: rgba(0, 0, 0, 0.8);\\r\\n  color: white;\\r\\n  border-radius: 4px;\\r\\n  min-width: 250px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n  font-size: 10px;\\r\\n  pointer-events: none;\\r\\n  display: flex; \\r\\n}\\r\\n\\r\\n\\r\\n.custom-tooltip .character-type {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.board.prairie {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \");\\r\\n}\\r\\n\\r\\n.board.desert {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_9___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_10___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_11___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_12___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_13___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_14___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_15___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_16___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_17___ + \");\\r\\n}\\r\\n\\r\\n.board.arctic {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_18___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_19___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_20___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_21___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_22___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_23___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_24___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_25___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_26___ + \");\\r\\n}\\r\\n\\r\\n.board.mountain {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_27___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_28___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_29___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_30___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_31___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_32___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_33___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_34___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_35___ + \");\\r\\n}\\r\\n\\r\\n.map-tile {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n}\\r\\n\\r\\n.map-tile-top-left {\\r\\n  background: var(--map-tile-top-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-top {\\r\\n  background: var(--map-tile-top-url);\\r\\n}\\r\\n\\r\\n.map-tile-top-right {\\r\\n  background: var(--map-tile-top-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-left {\\r\\n  background: var(--map-tile-bottom-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom {\\r\\n  background: var(--map-tile-bottom-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-right {\\r\\n  background: var(--map-tile-bottom-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-left {\\r\\n  background: var(--map-tile-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-right {\\r\\n  background: var(--map-tile-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-center {\\r\\n  background: var(--map-tile-center-url);\\r\\n}\\r\\n\\r\\n.character {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  position: absolute;\\r\\n  z-index: 1001;\\r\\n}\\r\\n\\r\\n.character.moving {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_36___ + \");\\r\\n}\\r\\n\\r\\n.character.bowman {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_37___ + \");\\r\\n}\\r\\n\\r\\n.character.daemon {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_38___ + \");\\r\\n}\\r\\n\\r\\n.character.magician {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_39___ + \");\\r\\n}\\r\\n\\r\\n.character.swordsman {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_40___ + \");\\r\\n}\\r\\n\\r\\n.character.undead {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_41___ + \");\\r\\n}\\r\\n\\r\\n.character.vampire {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_42___ + \");\\r\\n}\\r\\n\\r\\n.character.zombie {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_43___ + \");\\r\\n}\\r\\n\\r\\n.character.dead {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_44___ + \");\\r\\n  opacity: 0.7;\\r\\n  filter: grayscale(70%);\\r\\n  pointer-events: none;\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.character:hover {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.character.dead:hover {\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.health-level {\\r\\n  top: 2px;\\r\\n  left: 7px;\\r\\n  position: absolute;\\r\\n  width: 50px;\\r\\n  height: 4px;\\r\\n  background: #000;\\r\\n}\\r\\n\\r\\n.health-level-indicator {\\r\\n  height: 4px;\\r\\n}\\r\\n\\r\\n.health-level-indicator-high {\\r\\n  background: #0f0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-normal {\\r\\n  background: #ff0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-critical {\\r\\n  background: #f00;\\r\\n}\\r\\n\\r\\n// Меню выбора действий\\r\\n\\r\\n.action-menu {\\r\\n  z-index: 1002;\\r\\n  position: absolute;\\r\\n  background: rgba(0, 0, 0, 0.9);\\r\\n}\\r\\n\\r\\n.attack-menu {\\r\\n  left: 100%;\\r\\n  top: 50%;\\r\\n  transform: translateY(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.defence-menu {\\r\\n  left: 50%;\\r\\n  bottom: -50%;\\r\\n  transform: translateX(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.resurrect-menu {\\r\\n  left: 50%;\\r\\n  top: -50%;\\r\\n  transform: translateX(-50%);\\r\\n}\\r\\n\\r\\n.action-button {\\r\\n  background: #333;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  margin: 2px;\\r\\n  cursor: pointer;\\r\\n  border-radius: 3px;\\r\\n  text-align: left;\\r\\n  white-space: nowrap;\\r\\n}\\r\\n\\r\\n.action-button:hover {\\r\\n  background: #555;\\r\\n}\\r\\n\\r\\n// анимация перемещения\\r\\n\\r\\n.character.moving {\\r\\n  transition: transform 0.2s ease-in-out;\\r\\n  transform: scale(1.1);\\r\\n  filter: brightness(1.2);\\r\\n}\\r\\n\\r\\n#action-points {\\r\\n  position: absolute;\\r\\n  top: 10px;\\r\\n  right: 10px;\\r\\n  background: rgba(0, 0, 0, 0.7);\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  border-radius: 5px;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n#action-points h3 {\\r\\n  margin: 0 0 5px 0;\\r\\n  font-size: 1em;\\r\\n}\\r\\n\\r\\n#action-points p {\\r\\n  margin: 2px 0;\\r\\n  font-size: 0.9em;\\r\\n}\\r\\n\\r\\n/* Анимация урона */\\r\\n.damage {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  color: #ff0;\\r\\n  font-weight: bold;\\r\\n  font-size: 1.2em;\\r\\n  z-index: 2000;\\r\\n  pointer-events: none;\\r\\n  text-shadow: 0 0 3px black;\\r\\n  will-change: transform, opacity;\\r\\n  animation: damageAnimation 1s forwards;\\r\\n}\\r\\n\\r\\n.damage.critical {\\r\\n  color: red;\\r\\n  animation: criticalHit 1s forwards;\\r\\n  z-index: 2000;\\r\\n}\\r\\n\\r\\n@keyframes damageAnimation {\\r\\n  0% { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) translateY(-100px) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n@keyframes criticalHit {\\r\\n  0% { transform: translateX(-50%) scale(1); opacity: 1; }\\r\\n  50% { transform: translateX(-50%) scale(2); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n/* Меню статиситки игры */\\r\\n\\r\\n#game-stats {\\r\\n  display: block;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n\\r\\n}\\r\\n\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/css/style.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\":root {\\r\\n  --cell-size: 64px;\\r\\n}\\r\\n\\r\\nhtml, body {\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  background: #000;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\n.btn {\\r\\n  display: inline-block;\\r\\n  font-weight: 400;\\r\\n  color: #212529;\\r\\n  background-color: #f8f9fa;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n  padding: .375rem .75rem;\\r\\n  font-size: 1rem;\\r\\n  line-height: 1.5;\\r\\n  border-radius: .25rem;\\r\\n  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n\\r\\n  &:hover {\\r\\n    background-color:rgb(195, 197, 199);\\r\\n    transition: color 0.2s;\\r\\n  }\\r\\n}\\r\\n\\r\\n.controls {\\r\\n  text-align: center;\\r\\n  margin: 50px 0;\\r\\n}\\r\\n\\r\\n.game-info {\\r\\n  background-color: #000;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n.turn-indicator {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.game-message {\\r\\n  color: #4CAF50;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n.game-error {\\r\\n  color: #F44336;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n#game-board {\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n.board-container {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  flex-wrap: wrap;\\r\\n}\\r\\n\\r\\n.board {\\r\\n  display: grid;\\r\\n  grid-template-columns: repeat(8, 1fr);\\r\\n  grid-column-gap: 2px;\\r\\n  grid-row-gap: 2px;\\r\\n}\\r\\n\\r\\n.cell {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.cell.selected::before {\\r\\n  content: '';\\r\\n  display: block;\\r\\n  border: 4px;\\r\\n  border-radius: 32px;\\r\\n  box-sizing: border-box;\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  opacity: 0.9;\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n.cell.selected-yellow::before {\\r\\n  border-color: #ff0;\\r\\n  border-style: solid;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-green::before {\\r\\n  border-color: #0f0;\\r\\n  border-style: dashed;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-red::before {\\r\\n  border-color: #f00;\\r\\n  border-style: dashed;\\r\\n}\\r\\n\\r\\n.cell:hover {\\r\\n  cursor: default;\\r\\n}\\r\\n\\r\\n.cell:hover .custom-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.custom-tooltip {\\r\\n  position: absolute;\\r\\n  z-index: 9999;\\r\\n  bottom: 100%;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  background-color: rgba(0, 0, 0, 0.8);\\r\\n  color: white;\\r\\n  border-radius: 4px;\\r\\n  min-width: 250px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n  font-size: 10px;\\r\\n  pointer-events: none;\\r\\n  display: flex; \\r\\n}\\r\\n\\r\\n\\r\\n.custom-tooltip .character-type {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.board.prairie {\\r\\n  --map-tile-top-left-url: url('../img/prairie/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/prairie/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/prairie/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/prairie/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/prairie/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/prairie/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/prairie/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/prairie/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/prairie/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.board.desert {\\r\\n  --map-tile-top-left-url: url('../img/desert/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/desert/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/desert/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/desert/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/desert/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/desert/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/desert/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/desert/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/desert/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.board.arctic {\\r\\n  --map-tile-top-left-url: url('../img/arctic/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/arctic/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/arctic/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/arctic/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/arctic/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/arctic/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/arctic/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/arctic/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/arctic/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.board.mountain {\\r\\n  --map-tile-top-left-url: url('../img/mountain/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/mountain/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/mountain/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/mountain/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/mountain/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/mountain/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/mountain/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/mountain/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/mountain/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.map-tile {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n}\\r\\n\\r\\n.map-tile-top-left {\\r\\n  background: var(--map-tile-top-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-top {\\r\\n  background: var(--map-tile-top-url);\\r\\n}\\r\\n\\r\\n.map-tile-top-right {\\r\\n  background: var(--map-tile-top-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-left {\\r\\n  background: var(--map-tile-bottom-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom {\\r\\n  background: var(--map-tile-bottom-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-right {\\r\\n  background: var(--map-tile-bottom-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-left {\\r\\n  background: var(--map-tile-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-right {\\r\\n  background: var(--map-tile-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-center {\\r\\n  background: var(--map-tile-center-url);\\r\\n}\\r\\n\\r\\n.character {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  position: absolute;\\r\\n  z-index: 1001;\\r\\n}\\r\\n\\r\\n.character.moving {\\r\\n  background: url('../img/characters/moving.png');\\r\\n}\\r\\n\\r\\n.character.bowman {\\r\\n  background: url('../img/characters/bowman.png');\\r\\n}\\r\\n\\r\\n.character.daemon {\\r\\n  background: url('../img/characters/daemon.png');\\r\\n}\\r\\n\\r\\n.character.magician {\\r\\n  background: url('../img/characters/magician.png');\\r\\n}\\r\\n\\r\\n.character.swordsman {\\r\\n  background: url('../img/characters/swordsman.png');\\r\\n}\\r\\n\\r\\n.character.undead {\\r\\n  background: url('../img/characters/undead.png');\\r\\n}\\r\\n\\r\\n.character.vampire {\\r\\n  background: url('../img/characters/vampire.png');\\r\\n}\\r\\n\\r\\n.character.zombie {\\r\\n  background: url('../img/characters/zombie.png');\\r\\n}\\r\\n\\r\\n.character.dead {\\r\\n  background: url('../img/characters/dead.png');\\r\\n  opacity: 0.7;\\r\\n  filter: grayscale(70%);\\r\\n  pointer-events: none;\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.character:hover {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.character.dead:hover {\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.health-level {\\r\\n  top: 2px;\\r\\n  left: 7px;\\r\\n  position: absolute;\\r\\n  width: 50px;\\r\\n  height: 4px;\\r\\n  background: #000;\\r\\n}\\r\\n\\r\\n.health-level-indicator {\\r\\n  height: 4px;\\r\\n}\\r\\n\\r\\n.health-level-indicator-high {\\r\\n  background: #0f0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-normal {\\r\\n  background: #ff0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-critical {\\r\\n  background: #f00;\\r\\n}\\r\\n\\r\\n// Меню выбора действий\\r\\n\\r\\n.action-menu {\\r\\n  z-index: 1002;\\r\\n  position: absolute;\\r\\n  background: rgba(0, 0, 0, 0.9);\\r\\n}\\r\\n\\r\\n.attack-menu {\\r\\n  left: 100%;\\r\\n  top: 50%;\\r\\n  transform: translateY(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.defence-menu {\\r\\n  left: 50%;\\r\\n  bottom: -50%;\\r\\n  transform: translateX(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.resurrect-menu {\\r\\n  left: 50%;\\r\\n  top: -50%;\\r\\n  transform: translateX(-50%);\\r\\n}\\r\\n\\r\\n.action-button {\\r\\n  background: #333;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  margin: 2px;\\r\\n  cursor: pointer;\\r\\n  border-radius: 3px;\\r\\n  text-align: left;\\r\\n  white-space: nowrap;\\r\\n}\\r\\n\\r\\n.action-button:hover {\\r\\n  background: #555;\\r\\n}\\r\\n\\r\\n// анимация перемещения\\r\\n\\r\\n.character.moving {\\r\\n  transition: transform 0.2s ease-in-out;\\r\\n  transform: scale(1.1);\\r\\n  filter: brightness(1.2);\\r\\n}\\r\\n\\r\\n#action-points {\\r\\n  position: absolute;\\r\\n  top: 10px;\\r\\n  right: 10px;\\r\\n  background: rgba(0, 0, 0, 0.7);\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  border-radius: 5px;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n#action-points h3 {\\r\\n  margin: 0 0 5px 0;\\r\\n  font-size: 1em;\\r\\n}\\r\\n\\r\\n#action-points p {\\r\\n  margin: 2px 0;\\r\\n  font-size: 0.9em;\\r\\n}\\r\\n\\r\\n/* Анимация урона */\\r\\n.damage {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  color: #ff0;\\r\\n  font-weight: bold;\\r\\n  font-size: 1.2em;\\r\\n  z-index: 2000;\\r\\n  pointer-events: none;\\r\\n  text-shadow: 0 0 3px black;\\r\\n  will-change: transform, opacity;\\r\\n  animation: damageAnimation 1s forwards;\\r\\n}\\r\\n\\r\\n.damage.critical {\\r\\n  color: red;\\r\\n  animation: criticalHit 1s forwards;\\r\\n  z-index: 2000;\\r\\n}\\r\\n\\r\\n@keyframes damageAnimation {\\r\\n  0% { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) translateY(-100px) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n@keyframes criticalHit {\\r\\n  0% { transform: translateX(-50%) scale(1); opacity: 1; }\\r\\n  50% { transform: translateX(-50%) scale(2); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n/* Меню статиситки игры */\\r\\n\\r\\n#game-stats {\\r\\n  display: block;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n\\r\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\r\n * @todo\r\n * @param index - индекс поля\r\n * @param boardSize - размер квадратного поля (в длину или ширину)\r\n * @returns строка - тип ячейки на поле:\r\n *\r\n * top-left\r\n * top-right\r\n * top\r\n * bottom-left\r\n * bottom-right\r\n * bottom\r\n * right\r\n * left\r\n * center\r\n *\r\n * @example\r\n * ```js\r\n * calcTileType(0, 8); // 'top-left'\r\n * calcTileType(1, 8); // 'top'\r\n * calcTileType(63, 8); // 'bottom-right'\r\n * calcTileType(7, 7); // 'left'\r\n * ```\r\n * */\r\nexport function calcTileType(index, boardSize) {\r\n  const topLeftCell = 0;\r\n  const topRightCell = boardSize - 1;\r\n  const bottomRightCell = boardSize * boardSize - 1;\r\n  const bottomLeftCell = bottomRightCell - (boardSize - 1);\r\n\r\n  if (index === topLeftCell) return 'top-left';\r\n  if (index === topRightCell) return 'top-right';\r\n  if (index === bottomLeftCell) return 'bottom-left';\r\n  if (index === bottomRightCell) return 'bottom-right';\r\n\r\n  if (index < topRightCell) return 'top';\r\n  if (index > bottomLeftCell) return 'bottom';\r\n\r\n  if (index % boardSize === 0) return 'left';\r\n  if (index % boardSize === boardSize - 1) return 'right';\r\n  \r\n  return 'center';\r\n}\r\n\r\nexport function calcHealthLevel(health) {\r\n  if (health < 15) {\r\n    return 'critical';\r\n  }\r\n\r\n  if (health < 50) {\r\n    return 'normal';\r\n  }\r\n\r\n  return 'high';\r\n}\r\n","export default class Character {\r\n  constructor(level, type = \"moving\") {\r\n    if (typeof level !== 'number' || level < 1) {\r\n      throw new Error('Level must be a positive number');\r\n    }\r\n    this.level = level;\r\n    this.health = 50;\r\n    this.maxHealth = 100;\r\n    this.type = type;\r\n    this.moveDistance = 1;\r\n    this.attackDistance = 1;\r\n    this.actionPoints = 4;\r\n    this.currentActionPoints = 4;\r\n    this.team = 'player'; \r\n    this.isDead = false;\r\n\r\n    for (let i = 1; i < level; i++) {\r\n      this.levelUp();\r\n    }\r\n    \r\n    this.actions = {\r\n      attack: () => ({ damage: 10, cost: 1 }),\r\n      hardAttack: () => ({ damage: 15, cost: 2 }),\r\n      defence: () => ({ defence: this.defence * 2, cost: this.currentActionPoints }),\r\n      resurrect: () => ({ health: this.maxHealth / 2, cost: 2 })\r\n    };\r\n    \r\n    this.moveCost = {\r\n      straight: 1,\r\n      diagonal: 1 \r\n    };\r\n  }\r\n\r\n  levelUp() {\r\n    this.level++;\r\n    const newHealth = this.health + 80;\r\n    this.health = Math.min(newHealth, this.maxHealth);\r\n    \r\n    const healthPercentage = this.health / this.maxHealth * 100;\r\n    const improvementFactor = (80 + healthPercentage) / 100;\r\n    \r\n    if (typeof this.attack === 'number') {\r\n      this.attack = Math.max(this.attack, Math.round(this.attack * improvementFactor));\r\n    }\r\n    \r\n    if (typeof this.defence === 'number') {\r\n      this.defence = Math.max(this.defence, Math.round(this.defence * improvementFactor));\r\n    }\r\n    \r\n    this.resetActionPoints();\r\n  }\r\n\r\n  calculateDistance(pos1, pos2) {\r\n    const dx = Math.abs(pos1.x - pos2.x);\r\n    const dy = Math.abs(pos1.y - pos2.y);\r\n    return Math.max(dx, dy);\r\n  }\r\n\r\n  canAttack(targetPosition) {\r\n    return this.calculateDistance(this.position, targetPosition) <= this.attackDistance;\r\n  }\r\n\r\n  getMoveCost(fromIndex, toIndex, boardSize) {\r\n    const fromRow = Math.floor(fromIndex / boardSize);\r\n    const fromCol = fromIndex % boardSize;\r\n    const toRow = Math.floor(toIndex / boardSize);\r\n    const toCol = toIndex % boardSize;\r\n    \r\n    const isDiagonal = (fromRow !== toRow) && (fromCol !== toCol);\r\n    return isDiagonal ? this.moveCost.diagonal : this.moveCost.straight;\r\n  }\r\n\r\n  resetActionPoints() {\r\n    this.currentActionPoints = this.actionPoints;\r\n  }\r\n\r\n  takeDamage(damage) {\r\n    this.health -= damage;\r\n    if (this.health <= 0) {\r\n      this.die();\r\n    }\r\n    return this.health;\r\n  }\r\n\r\n  die() {\r\n    this.isDead = true;\r\n    this.health = 0;\r\n    this.currentActionPoints = 0; \r\n  }\r\n}\r\n","import Character from './Character.js';\r\n\r\nexport class PositionedCharacter {\r\n  constructor(character, position) {\r\n    if (!(character instanceof Character)) {\r\n      throw new Error('character must be instance of Character or its children');\r\n    }\r\n\r\n    if (typeof position !== 'number') {\r\n      throw new Error('position must be a number');\r\n    }\r\n\r\n    this.character = character;\r\n    this.position = position;\r\n  }\r\n}","/**\r\n * Класс, представляющий персонажей команды\r\n *\r\n * @todo Самостоятельно продумайте хранение персонажей в классе\r\n * Например\r\n * @example\r\n * ```js\r\n * const characters = [new Swordsman(2), new Bowman(1)]\r\n * const team = new Team(characters);\r\n *\r\n * team.characters // [swordsman, bowman]\r\n * ```\r\n * */\r\nexport default class Team {\r\n  // TODO: write your logic here\r\n  constructor(characters = []) {\r\n    this.characters = characters;\r\n  }\r\n}\r\n","/**\r\n * Формирует экземпляр персонажа из массива allowedTypes со\r\n * случайным уровнем от 1 до maxLevel\r\n *\r\n * @param allowedTypes массив классов\r\n * @param maxLevel максимальный возможный уровень персонажа\r\n * @returns генератор, который при каждом вызове\r\n * возвращает новый экземпляр класса персонажа\r\n *\r\n */\r\nimport Team from './Team.js';\r\n\r\nexport function* characterGenerator(allowedTypes, maxLevel) {\r\n  // TODO: write logic here\r\n  while (true) {\r\n    const RandomCharacter = allowedTypes[Math.floor(Math.random() * allowedTypes.length)];\r\n    \r\n    const randomLevel = Math.floor(Math.random() * maxLevel) + 1;\r\n    \r\n    yield new RandomCharacter(randomLevel);\r\n  }\r\n}\r\n\r\n/**\r\n * Формирует массив персонажей на основе characterGenerator\r\n * @param allowedTypes массив классов\r\n * @param maxLevel максимальный возможный уровень персонажа\r\n * @param characterCount количество персонажей, которое нужно сформировать\r\n * @returns экземпляр Team, хранящий экземпляры персонажей. Количество персонажей в команде - characterCount\r\n * */\r\nexport function generateTeam(allowedTypes, maxLevel, characterCount) {\r\n  // TODO: write logic here\r\n  const generator = characterGenerator(allowedTypes, maxLevel);\r\n  const characters = [];\r\n  \r\n  for (let i = 0; i < characterCount; i++) {\r\n    characters.push(generator.next().value);\r\n  }\r\n  \r\n  return new Team(characters);\r\n}\r\n\r\n","import Character from \"./Character.js\";\r\nimport { PositionedCharacter } from \"./PositionedCharacter.js\";\r\n\r\nexport default class GameState {\r\n  static from(object) {\r\n    return new GameState(\r\n      object.currentTurn,\r\n      object.maxScore,\r\n      object.currentLevel,\r\n      object.playerTeam,\r\n      object.enemyTeam,\r\n      object.positionedPlayerCharacters,\r\n      object.positionedEnemyCharacters\r\n    );\r\n  }\r\n\r\n  constructor(\r\n    currentTurn = 'player',\r\n    maxScore = 0,\r\n    currentLevel = 1,\r\n    playerTeam = null,\r\n    enemyTeam = null,\r\n    positionedPlayerCharacters = [],\r\n    positionedEnemyCharacters = []\r\n  ) {\r\n    this.currentTurn = currentTurn;\r\n    this.maxScore = maxScore;\r\n    this.currentLevel = currentLevel;\r\n    this.playerTeam = playerTeam;\r\n    this.enemyTeam = enemyTeam;\r\n    this.positionedPlayerCharacters = positionedPlayerCharacters;\r\n    this.positionedEnemyCharacters = positionedEnemyCharacters;\r\n  }\r\n\r\n  serialize() {\r\n    const safeSerialize = (obj) => {\r\n      if (Array.isArray(obj)) {\r\n        return obj.map(item => safeSerialize(item));\r\n      }\r\n      if (obj instanceof PositionedCharacter) {\r\n        return {\r\n          character: safeSerialize(obj.character),\r\n          position: obj.position\r\n        };\r\n      }\r\n      if (obj instanceof Character) {\r\n        const serialized = {};\r\n        Object.keys(obj).forEach(key => {\r\n          if (typeof obj[key] !== 'function' && key !== 'actions' && key !== 'moveCost') {\r\n            serialized[key] = obj[key];\r\n          }\r\n        });\r\n        serialized.type = obj.type; \r\n        return serialized;\r\n      }\r\n      return obj;\r\n    };\r\n    \r\n    return safeSerialize({\r\n      currentTurn: this.currentTurn,\r\n      maxScore: this.maxScore,\r\n      currentLevel: this.currentLevel,\r\n      playerTeam: this.playerTeam,\r\n      enemyTeam: this.enemyTeam,\r\n      positionedPlayerCharacters: this.positionedPlayerCharacters,\r\n      positionedEnemyCharacters: this.positionedEnemyCharacters,\r\n      isGameLocked: false \r\n    });\r\n  }\r\n}","import GameState from './GameState.js';\r\n\r\nexport default class GameStateService {\r\n  constructor(storage, gamePlay) {\r\n    this.storage = storage;\r\n    this.gamePlay = gamePlay;\r\n  }\r\n\r\n  save(state) {\r\n    try {\r\n      const gameState = new GameState(\r\n        state.currentTurn,\r\n        state.maxScore,\r\n        state.currentLevel,\r\n        state.playerTeam,\r\n        state.enemyTeam,\r\n        state.positionedPlayerCharacters,\r\n        state.positionedEnemyCharacters\r\n      ).serialize();\r\n      \r\n      this.storage.setItem('state', JSON.stringify(gameState));\r\n      this.gamePlay.showMessage('Игра сохранена');\r\n    } catch (error) {\r\n      console.error('Ошибка сохранения:', error);\r\n      this.gamePlay.showError('Не удалось сохранить игру');\r\n    }\r\n  }\r\n\r\n  load() {\r\n    try {\r\n      const data = JSON.parse(this.storage.getItem('state'));\r\n      if (!data) throw new Error('Нет сохраненных данных');\r\n      \r\n      console.log('Loaded data:', JSON.parse(JSON.stringify(data)));\r\n      \r\n      this.gamePlay.showMessage('Игра загружена');\r\n      return GameState.from(data);\r\n    } catch (error) {\r\n      console.error('Load error:', error);\r\n      this.gamePlay.showError('Не удалось загрузить игру');\r\n      throw error;\r\n    }\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Bowman extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '15-25';\r\n    this.defence = 25;\r\n    this.type = 'bowman';\r\n    this.moveDistance = 4;\r\n    this.attackDistance = 3;\r\n    \r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 15;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      },\r\n      hardAttack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 20;\r\n        const isCritical = Math.random() < 0.1;\r\n        return {\r\n          damage: isCritical ? damage * 2 : damage,\r\n          cost: 2,\r\n          isCritical\r\n        };\r\n      },\r\n      defence: () => ({\r\n        defence: this.defence * 2\r\n      })\r\n    };\r\n\r\n    this.moveCost = {\r\n      straight: 1,\r\n      diagonal: 2\r\n    };\r\n  }\r\n}\r\n","import Character from '../Character.js';\r\n\r\nexport default class Swordsman extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '30-40';\r\n    this.defence = 10;\r\n    this.type = 'swordsman';\r\n    this.moveDistance = 4;\r\n    this.attackDistance = 1;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 30;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      },\r\n      hardAttack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 40;\r\n        const isCritical = Math.random() < 0.1;\r\n        return {\r\n          damage: isCritical ? damage * 2 : damage,\r\n          cost: 2,\r\n          isCritical\r\n        };\r\n      },\r\n      defence: () => ({\r\n        defence: this.defence * 2\r\n      })\r\n    };\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Magician extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '10-20';\r\n    this.defence = 40;\r\n    this.type = 'magician';\r\n    this.moveDistance = 2;\r\n    this.attackDistance = 4;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 10;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      },\r\n      hardAttack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 20;\r\n        const isCritical = Math.random() < 0.1;\r\n        return {\r\n          damage: isCritical ? damage * 2 : damage,\r\n          cost: 2,\r\n          isCritical\r\n        };\r\n      },\r\n      defence: () => ({\r\n        defence: this.defence * 2\r\n      })\r\n    };\r\n\r\n    this.actions.resurrect = () => ({\r\n      healthRestored: this.maxHealth / 2,\r\n      cost: 2\r\n    });\r\n\r\n    this.moveCost = {\r\n      straight: 2,\r\n      diagonal: 3\r\n    };\r\n  }\r\n}\r\n","import Character from '../Character.js';\r\n\r\nexport default class Daemon extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '10-20';\r\n    this.defence = 40;\r\n    this.type = 'daemon';\r\n    this.moveDistance = 2;\r\n    this.attackDistance = 2;\r\n    this.team = 'enemy';\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 20;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      }\r\n    };\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Undead extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '30-40';\r\n    this.defence = 10;\r\n    this.type = 'undead';\r\n    this.moveDistance = 4;\r\n    this.attackDistance = 2;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 30;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      }\r\n    };\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Vampire extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '15-25';\r\n    this.defence = 25;\r\n    this.type = 'vampire';\r\n    this.moveDistance = 2;\r\n    this.attackDistance = 2;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 10;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical,\r\n        };\r\n      }\r\n    };\r\n  }\r\n}\r\n","/**\r\n * Entry point of app: don't change this\r\n */\r\nimport GamePlay from './GamePlay.js';\r\nimport GameController from './GameController.js';\r\nimport GameStateService from './GameStateService.js';\r\n\r\nconst gamePlay = new GamePlay();\r\ngamePlay.bindToDOM(document.querySelector('#game-container'));\r\n\r\nconst stateService = new GameStateService(localStorage, gamePlay);\r\n\r\nconst gameCtrl = new GameController(gamePlay, stateService);\r\ngameCtrl.init();\r\n\r\n// don't write your code here","import { calcHealthLevel, calcTileType } from './utils.js';\r\n\r\nexport default class GamePlay {\r\n  constructor() {\r\n    this.boardSize = 8;\r\n    this.container = null;\r\n    this.boardEl = null;\r\n    this.cells = [];\r\n    this.cellClickListeners = [];\r\n    this.cellEnterListeners = [];\r\n    this.cellLeaveListeners = [];\r\n    this.newGameListeners = [];\r\n    this.saveGameListeners = [];\r\n    this.loadGameListeners = [];\r\n  }\r\n\r\n  bindToDOM(container) {\r\n    if (!(container instanceof HTMLElement)) {\r\n      throw new Error('container is not HTMLElement');\r\n    }\r\n    this.container = container;\r\n  }\r\n\r\n  drawUi(theme) {\r\n    this.checkBinding();\r\n\r\n    this.container.innerHTML = `\r\n      <div class=\"controls\">\r\n        <button data-id=\"action-restart\" class=\"btn\">New Game</button>\r\n        <button data-id=\"action-save\" class=\"btn\">Save Game</button>\r\n        <button data-id=\"action-load\" class=\"btn\">Load Game</button>\r\n      </div>\r\n      <div id=\"game-stats\">\r\n        <div>Уровень: <span id=\"current-level\">1</span></div>\r\n        <div>Макс. счет: <span id=\"max-score\">0</span></div>\r\n      </div>\r\n      <div id=\"action-points\"></div>\r\n      <div class=\"board-container\">\r\n        <div data-id=\"board\" class=\"board\"></div>\r\n      </div>\r\n      <div class=\"game-info\">\r\n        <div id=\"current-turn\" class=\"turn-indicator\"></div>\r\n        <div id=\"game-message\" class=\"game-message\"></div>\r\n        <div id=\"game-error\" class=\"game-error\"></div>\r\n      </div>\r\n    `;\r\n\r\n    this.newGameEl = this.container.querySelector('[data-id=action-restart]');\r\n    this.saveGameEl = this.container.querySelector('[data-id=action-save]');\r\n    this.loadGameEl = this.container.querySelector('[data-id=action-load]');\r\n\r\n    this.newGameEl.addEventListener('click', event => this.onNewGameClick(event));\r\n    this.saveGameEl.addEventListener('click', event => this.onSaveGameClick(event));\r\n    this.loadGameEl.addEventListener('click', event => this.onLoadGameClick(event));\r\n\r\n    this.boardEl = this.container.querySelector('[data-id=board]');\r\n    this.boardEl.classList.add(theme);\r\n\r\n    for (let i = 0; i < this.boardSize ** 2; i += 1) {\r\n      const cellEl = document.createElement('div');\r\n      cellEl.classList.add('cell', 'map-tile', `map-tile-${calcTileType(i, this.boardSize)}`);\r\n      cellEl.addEventListener('mouseenter', event => this.onCellEnter(event));\r\n      cellEl.addEventListener('mouseleave', event => this.onCellLeave(event));\r\n      cellEl.addEventListener('click', event => this.onCellClick(event));\r\n      this.boardEl.appendChild(cellEl);\r\n    }\r\n\r\n    this.cells = Array.from(this.boardEl.children);\r\n  }\r\n\r\n  updateStats(level, maxScore) {\r\n    const levelEl = document.getElementById('current-level');\r\n    const scoreEl = document.getElementById('max-score');\r\n    \r\n    if (levelEl) levelEl.textContent = level;\r\n    if (scoreEl) scoreEl.textContent = maxScore;\r\n  }\r\n\r\n  redrawPositions(positions) {\r\n    this.cells.forEach(cell => cell.innerHTML = '');\r\n  \r\n    positions.forEach(position => {\r\n      const cellEl = this.boardEl.children[position.position];\r\n      const charEl = document.createElement('div');\r\n      \r\n      charEl.classList.add('character', position.character.isDead ? 'dead' : position.character.type);\r\n  \r\n      const healthEl = document.createElement('div');\r\n      healthEl.classList.add('health-level');\r\n  \r\n      const healthIndicatorEl = document.createElement('div');\r\n      healthIndicatorEl.classList.add(\r\n        'health-level-indicator', \r\n        `health-level-indicator-${calcHealthLevel(position.character.health)}`\r\n      );\r\n      healthIndicatorEl.style.width = `${position.character.health}%`;\r\n      \r\n      healthEl.appendChild(healthIndicatorEl);\r\n      charEl.appendChild(healthEl);\r\n      cellEl.appendChild(charEl);\r\n    });\r\n  }\r\n\r\n  addCellClickListener(callback) {\r\n    this.cellClickListeners.push(callback);\r\n  }\r\n\r\n  addCellEnterListener(callback) {\r\n    this.cellEnterListeners.push(callback);\r\n  }\r\n\r\n  addCellLeaveListener(callback) {\r\n    this.cellLeaveListeners.push(callback);\r\n  }\r\n\r\n  addNewGameListener(callback) {\r\n    this.newGameListeners.push(callback);\r\n  }\r\n\r\n  addSaveGameListener(callback) {\r\n    this.saveGameListeners.push(callback);\r\n  }\r\n\r\n  addLoadGameListener(callback) {\r\n    this.loadGameListeners.push(callback);\r\n  }\r\n\r\n  findCharacterByPosition(positionedCharacters, index) {\r\n    return positionedCharacters.find(c => c.position === index)?.character;\r\n  }\r\n  \r\n  findPositionByCharacter(positionedCharacters, character) {\r\n    const positionedChar = positionedCharacters.find(\r\n      (c) => c.character === character\r\n    );\r\n    if (!positionedChar) {\r\n      console.error('Character not found in positionedCharacters:', character);\r\n      console.log('Current positionedCharacters:', positionedCharacters);\r\n    }\r\n    return positionedChar ? positionedChar.position : null;\r\n  }\r\n\r\n  onCellEnter(event) {\r\n    event.preventDefault();\r\n    const index = this.cells.indexOf(event.currentTarget);\r\n    this.cellEnterListeners.forEach(o => o.call(null, index));\r\n  }\r\n\r\n  onCellLeave(event) {\r\n    this.setCursor('default');\r\n    event.preventDefault();\r\n    const index = this.cells.indexOf(event.currentTarget);\r\n    this.cellLeaveListeners.forEach(o => o.call(null, index));\r\n  }\r\n\r\n  onCellClick(event) {\r\n    const index = this.cells.indexOf(event.currentTarget);\r\n    this.cellClickListeners.forEach(o => o.call(null, index));\r\n  }\r\n\r\n  onNewGameClick(event) {\r\n    event.preventDefault();\r\n    this.newGameListeners.forEach(o => o.call(null));\r\n  }\r\n\r\n  onSaveGameClick(event) {\r\n    event.preventDefault();\r\n    this.saveGameListeners.forEach(o => o.call(null));\r\n  }\r\n\r\n  onLoadGameClick(event) {\r\n    event.preventDefault();\r\n    this.loadGameListeners.forEach(o => o.call(null));\r\n  }\r\n\r\n  setCursor(cursorType) {\r\n    this.boardEl.style.cursor = cursorType;\r\n  }\r\n\r\n  showError(message) {\r\n    const errorElement = document.getElementById('game-error');\r\n    if (errorElement) {\r\n      errorElement.textContent = message;\r\n      setTimeout(() => errorElement.textContent = '', 3000);\r\n    }\r\n  }\r\n\r\n  showMessage(message) {\r\n    const messageElement = document.getElementById('game-message');\r\n    if (messageElement) {\r\n      messageElement.textContent = message;\r\n      setTimeout(() => messageElement.textContent = '', 3000);\r\n    }\r\n  }\r\n\r\n  selectCell(index, color = 'yellow', style = 'solid') {\r\n    this.deselectCell(index);\r\n    this.cells[index].classList.add('selected', `selected-${color}`);\r\n    if (style === 'dashed') {\r\n      this.cells[index].classList.add('selected-dashed');\r\n    }\r\n  }\r\n\r\n  deselectCell(index) {\r\n    const cell = this.cells[index];\r\n    cell.classList.remove(\r\n      'selected', \r\n      'selected-yellow', \r\n      'selected-green', \r\n      'selected-red',\r\n      'selected-dashed'\r\n    );\r\n  }\r\n\r\n  deselectAllCells() {\r\n    this.cells.forEach((_, index) => this.deselectCell(index));\r\n  }\r\n\r\n  hideActionMenu() {\r\n    const menus = document.querySelectorAll('.action-menu');\r\n    menus.forEach(menu => {\r\n      try {\r\n        menu.parentNode?.removeChild(menu);\r\n      } catch (e) {\r\n        console.error('Error removing action menu:', e);\r\n      }\r\n    });\r\n  }\r\n\r\n  showActionMenu(index, items, type = 'attack') {\r\n    this.hideActionMenu();\r\n    \r\n    const menu = document.createElement('div');\r\n    menu.className = `action-menu ${type}-menu`;\r\n    \r\n    items.forEach(item => {\r\n      const button = document.createElement('button');\r\n      button.className = 'action-button';\r\n      button.textContent = item.text;\r\n      button.addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n        item.action();\r\n      });\r\n      menu.appendChild(button);\r\n    });\r\n    \r\n    const cell = this.cells[index];\r\n    cell.appendChild(menu);\r\n  }\r\n\r\n  showAttackRange(character, positionedCharacters) {\r\n    const position = this.findPositionByCharacter(positionedCharacters, character);\r\n    if (position === null) return;\r\n  \r\n    const enemyTeam = positionedCharacters.filter(pc => \r\n      pc.character.team !== character.team\r\n    );\r\n  \r\n    enemyTeam.forEach(enemy => {\r\n      const distance = character.calculateDistance(\r\n        { x: position % this.boardSize, y: Math.floor(position / this.boardSize) },\r\n        { x: enemy.position % this.boardSize, y: Math.floor(enemy.position / this.boardSize) }\r\n      );\r\n      \r\n      if (distance <= character.attackDistance) {\r\n        this.selectCell(enemy.position, 'red', 'dashed');\r\n      }\r\n    });\r\n  }\r\n\r\n  async showDamage(index, damage, isCritical = false) {\r\n    const cell = this.cells[index];\r\n    if (!cell) return;\r\n  \r\n    const existingDamage = cell.querySelector('.damage');\r\n    if (existingDamage && cell.contains(existingDamage)) {\r\n      cell.removeChild(existingDamage);\r\n    }\r\n  \r\n    const damageEl = document.createElement('div');\r\n    damageEl.className = `damage ${isCritical ? 'critical' : ''}`;\r\n    damageEl.textContent = `-${damage}`;\r\n    cell.appendChild(damageEl);\r\n  \r\n    await new Promise(resolve => {\r\n      damageEl.addEventListener('animationend', () => {\r\n        if (cell.contains(damageEl)) {\r\n          cell.removeChild(damageEl);\r\n        }\r\n        resolve();\r\n      }, { once: true });\r\n    });\r\n  }\r\n\r\n  showCellTooltip(message, index) {\r\n    const cell = this.cells[index];\r\n    if (!cell) return;\r\n  \r\n    const oldTooltip = cell.querySelector('.custom-tooltip');\r\n    if (oldTooltip) {\r\n      cell.removeChild(oldTooltip);\r\n    }\r\n  \r\n    const tooltip = document.createElement('div');\r\n    tooltip.className = 'custom-tooltip';\r\n    \r\n    tooltip.innerHTML = `\r\n      <span class=\"character-type\">${message}</span>\r\n    `;\r\n  \r\n    cell.appendChild(tooltip);\r\n    cell.tooltip = tooltip; \r\n  }\r\n  \r\n  removeCellTooltip(index) {\r\n    const cell = this.cells[index];\r\n    if (!cell) return;\r\n    \r\n    const tooltip = cell.querySelector('.custom-tooltip');\r\n    if (tooltip && cell.contains(tooltip)) {\r\n      cell.removeChild(tooltip);\r\n    }\r\n    delete cell.tooltip;\r\n  }\r\n\r\n  checkBinding() {\r\n    if (this.container === null) {\r\n      throw new Error('GamePlay not bind to DOM');\r\n    }\r\n  }\r\n}","import { PositionedCharacter } from './PositionedCharacter.js';\r\nimport { generateTeam } from './generators.js';\r\nimport GameStateService from './GameStateService.js';\r\nimport GameState from './GameState.js';\r\nimport Bowman from './characters/Bowman.js';\r\nimport Swordsman from './characters/Swordsman.js';\r\nimport Magician from './characters/Magician.js';\r\nimport Daemon from './characters/Daemon.js';\r\nimport Undead from './characters/Undead.js';\r\nimport Vampire from './characters/Vampire.js';\r\n\r\nexport default class GameController {\r\n  constructor(gamePlay, stateService) {\r\n    this.gamePlay = gamePlay;\r\n    this.stateService = stateService || new GameStateService(localStorage, this.gamePlay);\r\n    this.playerTypes = [Bowman, Swordsman, Magician];\r\n    this.enemyTypes = [Daemon, Undead, Vampire];\r\n\r\n    this.maxLevel = 4;\r\n    this.maxCharacters = 3;\r\n    this.characterCount = 2;\r\n\r\n    this.playerTeam = [];\r\n    this.enemyTeam = [];\r\n    this.positionedPlayerCharacters = [];\r\n    this.positionedEnemyCharacters = [];\r\n\r\n    this.gameState = new GameState();\r\n    this.selectedCharacter = null;\r\n    this.selectedCellIndex = null;\r\n    this.isCharacterSelected = false;\r\n\r\n    this.movingCharacter = null;\r\n    this.movingPath = [];\r\n\r\n    this.currentLevel = 1;\r\n    this.maxLevel = 4;\r\n    this.themes = ['prairie', 'desert', 'arctic', 'mountain'];\r\n    this.maxScore = 0;\r\n  }\r\n\r\n  async checkWinConditions() {\r\n    const allEnemiesDead = this.positionedEnemyCharacters.every(\r\n      (pc) => pc.character.isDead || pc.character.health <= 0\r\n    );\r\n\r\n    const allPlayersDead = this.positionedPlayerCharacters.every(\r\n      (pc) => pc.character.isDead || pc.character.health <= 0\r\n    );\r\n\r\n    if (allEnemiesDead) {\r\n      const score = this.calculateScore();\r\n      this.maxScore = Math.max(this.maxScore, score);\r\n      \r\n      if (this.currentLevel < this.maxLevel) {\r\n        await this.nextLevel();\r\n      } else {\r\n        this.gamePlay.showMessage(`Поздравляем! Вы прошли все уровни! Максимальный счет: ${this.maxScore}`);\r\n        this.lockGame();\r\n      }\r\n      return true;\r\n    }\r\n\r\n    if (allPlayersDead) {\r\n      this.gamePlay.showMessage(`Игра окончена. Вы проиграли. Максимальный счет: ${this.maxScore}`);\r\n      this.lockGame();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  async nextLevel() {\r\n    this.currentLevel++;\r\n    const theme = this.themes[this.currentLevel - 1];\r\n    \r\n    this.increaseScore(100);\r\n    \r\n    this.playerTeam.characters\r\n      .filter(c => !c.isDead)\r\n      .forEach(c => {\r\n        const newHealth = c.level + 80;\r\n        c.health = Math.min(newHealth, c.maxHealth);\r\n        \r\n        const healthPercentage = (c.health / c.maxHealth) * 100;\r\n        if (healthPercentage > 50) {\r\n          c.defence = Math.round(c.defence * 1.1); \r\n        } else if (healthPercentage > 30) {\r\n          c.defence = Math.round(c.defence * 1.05); \r\n        }\r\n        \r\n        c.levelUp();\r\n      });\r\n      \r\n    this.gamePlay.showMessage(`Уровень ${this.currentLevel}! Тема: ${theme}`);\r\n    this.gamePlay.drawUi(theme);\r\n    this.generateTeams();\r\n    this.redrawTeams();\r\n    this.resetCharactersActionPoints();\r\n    this.updateTurnIndicator();\r\n    this.updateStats();\r\n  }\r\n\r\n  calculateScore() {\r\n    return this.playerTeam.characters.reduce((score, char) => {\r\n      return score + char.level * 10 + char.health;\r\n    }, 0);\r\n  }\r\n\r\n  increaseScore(points) {\r\n    this.maxScore += points;\r\n    this.updateStats();\r\n  }\r\n\r\n  lockGame() {\r\n    this.gamePlay.deselectAllCells();\r\n    this.gamePlay.hideActionMenu();\r\n    this.isGameLocked = true;\r\n  }\r\n\r\n  updateStats() {\r\n    this.gamePlay.updateStats(this.currentLevel, this.maxScore);\r\n  }\r\n\r\n  saveGame() {\r\n    try {\r\n      const gameState = new GameState(\r\n        this.gameState.currentTurn,\r\n        this.maxScore,\r\n        this.currentLevel,\r\n        this.playerTeam,\r\n        this.enemyTeam,\r\n        this.positionedPlayerCharacters,\r\n        this.positionedEnemyCharacters\r\n      );\r\n      this.stateService.save(gameState);\r\n    } catch (error) {\r\n      this.gamePlay.showError('Ошибка при сохранении игры');\r\n      console.error('Save error:', error);\r\n    }\r\n  }\r\n  \r\n  async loadGame() {\r\n    this.isGameLocked = false;\r\n    try {\r\n      const loadedState = this.stateService.load();\r\n      \r\n      const restoreTeam = (team, types) => {\r\n        if (!team || !team.characters) return team;\r\n        team.characters = team.characters.map(charData => {\r\n          const CharClass = types.find(t => t.name.toLowerCase() === charData.type);\r\n          if (!CharClass) return charData;\r\n          \r\n          const character = new CharClass(charData.level);\r\n          \r\n          Object.keys(charData).forEach(key => {\r\n            if (key !== 'actions' && key !== 'moveCost') {\r\n              character[key] = charData[key];\r\n            }\r\n          });\r\n          \r\n          return character;\r\n        });\r\n        return team;\r\n      };\r\n\r\n      const restoreActionsAndMoveCost = (character) => {\r\n        const CharClass = [...this.playerTypes, ...this.enemyTypes].find(\r\n          t => t.name.toLowerCase() === character.type\r\n        );\r\n        if (CharClass) {\r\n          const tempChar = new CharClass(character.level);\r\n          character.actions = {...tempChar.actions};\r\n          character.moveCost = {...tempChar.moveCost};\r\n        }\r\n      };\r\n  \r\n      this.maxScore = loadedState.maxScore;\r\n      this.currentLevel = loadedState.currentLevel;\r\n      this.gameState.currentTurn = loadedState.currentTurn;\r\n      \r\n      this.playerTeam = restoreTeam(loadedState.playerTeam, this.playerTypes);\r\n      this.enemyTeam = restoreTeam(loadedState.enemyTeam, this.enemyTypes);\r\n\r\n      [...this.playerTeam.characters, ...this.enemyTeam.characters].forEach(\r\n        restoreActionsAndMoveCost\r\n      );\r\n      \r\n      const restorePositioned = (team, positioned) => {\r\n        return positioned.map(pc => {\r\n          const char = team?.characters?.find(c => \r\n            c.type === pc.character.type && \r\n            c.level === pc.character.level\r\n          ) || pc.character;\r\n          return new PositionedCharacter(char, pc.position);\r\n        });\r\n      };\r\n  \r\n      this.positionedPlayerCharacters = restorePositioned(\r\n        this.playerTeam, \r\n        loadedState.positionedPlayerCharacters\r\n      );\r\n      this.positionedEnemyCharacters = restorePositioned(\r\n        this.enemyTeam,\r\n        loadedState.positionedEnemyCharacters\r\n      );\r\n  \r\n      const theme = this.themes[this.currentLevel - 1];\r\n      this.gamePlay.drawUi(theme);\r\n      \r\n      this.setupEventListeners();\r\n      this.gamePlay.addNewGameListener(() => this.newGame());\r\n      this.gamePlay.addSaveGameListener(() => this.saveGame());\r\n      this.gamePlay.addLoadGameListener(() => this.loadGame());\r\n      \r\n      this.redrawTeams();\r\n      this.updateTurnIndicator();\r\n      this.updateStats();\r\n      this.resetCharactersActionPoints();\r\n      \r\n      console.log('Game loaded successfully:', {\r\n        playerTeam: this.playerTeam,\r\n        enemyTeam: this.enemyTeam,\r\n        positionedChars: this.positionedPlayerCharacters\r\n      });\r\n    } catch (error) {\r\n      console.error('Load error:', error);\r\n      this.gamePlay.showError('Не удалось загрузить игру');\r\n      this.newGame();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    try {\r\n      const theme = this.themes[this.currentLevel - 1];\r\n      this.gamePlay.drawUi(theme);\r\n      this.generateTeams();\r\n      this.redrawTeams();\r\n      this.setupEventListeners();\r\n      \r\n      this.gamePlay.addNewGameListener(() => this.newGame());\r\n      this.gamePlay.addSaveGameListener(() => this.saveGame());\r\n      this.gamePlay.addLoadGameListener(() => this.loadGame());\r\n  \r\n      this.gamePlay.setCursor = (cursorType) => {\r\n        this.gamePlay.boardEl.style.cursor = cursorType;\r\n      };\r\n      this.gamePlay.setCursor('default');\r\n    } catch (error) {\r\n      this.gamePlay.showError(error.message);\r\n    }\r\n    this.updateTurnIndicator();\r\n    this.resetCharactersActionPoints();\r\n    this.updateStats();\r\n  }\r\n\r\n  newGame() {\r\n    this.currentLevel = 1;\r\n    this.isGameLocked = false;\r\n    const theme = this.themes[this.currentLevel - 1];\r\n    this.gamePlay.drawUi(theme);\r\n    this.generateTeams();\r\n    this.redrawTeams();\r\n    this.resetCharactersActionPoints();\r\n    this.updateTurnIndicator();\r\n    this.updateStats();\r\n  }\r\n\r\n  resetCharactersActionPoints() {\r\n    this.playerTeam.characters.forEach((c) => {\r\n      if (!c.isDead) c.resetActionPoints();\r\n    });\r\n    this.enemyTeam.characters.forEach((c) => {\r\n      if (!c.isDead) c.resetActionPoints();\r\n    });\r\n  }\r\n\r\n  generateTeams() {\r\n    const actualCount = Math.min(this.characterCount, this.maxCharacters);\r\n    this.playerTeam = generateTeam(\r\n      this.playerTypes,\r\n      this.maxLevel,\r\n      actualCount\r\n    );\r\n    this.enemyTeam = generateTeam(this.enemyTypes, this.maxLevel, actualCount);\r\n\r\n    this.positionedPlayerCharacters = this.positionCharacters(\r\n      this.playerTeam.characters,\r\n      [0, 1]\r\n    );\r\n    this.positionedEnemyCharacters = this.positionCharacters(\r\n      this.enemyTeam.characters,\r\n      [6, 7]\r\n    );\r\n  }\r\n\r\n  positionCharacters(characters, allowedColumns) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    const usedPositions = new Set();\r\n    const maxPossible = boardSize * allowedColumns.length;\r\n\r\n    if (characters.length > maxPossible) {\r\n      throw new Error(`Недостаточно места для ${characters.length} персонажей`);\r\n    }\r\n\r\n    return characters.map((character) => {\r\n      const availablePositions = allowedColumns\r\n        .flatMap((col) =>\r\n          Array.from({ length: boardSize }, (_, row) => row * boardSize + col)\r\n        )\r\n        .filter((pos) => !usedPositions.has(pos));\r\n\r\n      const position =\r\n        availablePositions[\r\n          Math.floor(Math.random() * availablePositions.length)\r\n        ];\r\n      usedPositions.add(position);\r\n\r\n      return new PositionedCharacter(character, position);\r\n    });\r\n  }\r\n\r\n  redrawTeams() {\r\n    const allPositionedCharacters = [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters,\r\n    ];\r\n    this.gamePlay.redrawPositions(allPositionedCharacters);\r\n  }\r\n\r\n  setupEventListeners() {\r\n    this.gamePlay.cellClickListeners = [];\r\n    this.gamePlay.cellEnterListeners = [];\r\n    this.gamePlay.cellLeaveListeners = [];\r\n\r\n    this.gamePlay.addCellClickListener(this.onCellClick.bind(this));\r\n    this.gamePlay.addCellEnterListener(this.onCellEnter.bind(this));\r\n    this.gamePlay.addCellLeaveListener(this.onCellLeave.bind(this));\r\n  }\r\n\r\n  updateTurnIndicator() {\r\n    const turnElement = document.getElementById('current-turn');\r\n    if (!turnElement) return;\r\n\r\n    if (this.gameState.currentTurn === 'player') {\r\n      turnElement.textContent = 'Ваш ход';\r\n      turnElement.className = 'player-turn';\r\n    } else {\r\n      turnElement.textContent = 'Ход противника';\r\n      turnElement.className = 'enemy-turn';\r\n    }\r\n  }\r\n\r\n  onCellClick(index) {\r\n    if (this.isGameLocked) {\r\n      console.warn('Game is locked!');\r\n      return;\r\n    }\r\n    \r\n    const allChars = this.getAllCharacters();\r\n    const clickedChar = this.gamePlay.findCharacterByPosition(allChars, index);\r\n    \r\n    if (!clickedChar) {\r\n      console.log('No character at position', index);\r\n    } else {\r\n      console.log('Clicked character:', {\r\n        type: clickedChar.type,\r\n        team: clickedChar.team,\r\n        isDead: clickedChar.isDead,\r\n        proto: Object.getPrototypeOf(clickedChar)\r\n      });\r\n    }\r\n\r\n    if (clickedChar) {\r\n      if (this.playerTeam.characters.includes(clickedChar)) {\r\n        this.selectCharacter(clickedChar, index);\r\n      } else if (this.isCharacterSelected) {\r\n        this.showAttackMenu(this.selectedCharacter, clickedChar, index);\r\n      }\r\n    } else if (this.isCharacterSelected) {\r\n      this.moveCharacter(this.selectedCharacter, index);\r\n    }\r\n  }\r\n\r\n  onCellEnter(index) {\r\n    const allChars = [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters,\r\n    ];\r\n    const positionedChar = allChars.find(pc => pc.position === index);\r\n    \r\n    if (positionedChar) {\r\n      const cursor = positionedChar.character.isDead ? 'not-allowed' : 'pointer';\r\n      this.gamePlay.setCursor(cursor);\r\n      \r\n      if (!positionedChar.character.isDead) {\r\n        this.gamePlay.showCellTooltip(\r\n          `${positionedChar.character.type} \\n (🎖${positionedChar.character.level} ⚔${positionedChar.character.attack} 🛡${positionedChar.character.defence} ❤${positionedChar.character.health})`,\r\n          index\r\n        );\r\n      } else {\r\n        this.gamePlay.removeCellTooltip(index);\r\n      }\r\n    } else {\r\n      this.gamePlay.setCursor('default');\r\n      this.gamePlay.removeCellTooltip(index);\r\n    }\r\n  }\r\n\r\n  onCellLeave(index) {\r\n    this.gamePlay.removeCellTooltip(index);\r\n    this.gamePlay.setCursor('default');\r\n  }\r\n\r\n  getAllCharacters() {\r\n    return [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters\r\n    ].filter(pc => !pc.character.isDead);\r\n  }\r\n\r\n  selectCharacter(character, position) {\r\n    this.gamePlay.deselectAllCells();\r\n    this.gamePlay.hideActionMenu();\r\n\r\n    this.selectedCharacter = character;\r\n    this.selectedCellIndex = position;\r\n    this.isCharacterSelected = true;\r\n\r\n    this.gamePlay.selectCell(position, 'yellow');\r\n    this.updateAvailableActions();\r\n  }\r\n\r\n  updateAvailableActions() {\r\n    if (!this.selectedCharacter) return;\r\n\r\n    this.showPossibleActions();\r\n    this.updateActionPointsDisplay();\r\n    this.showDefenceButton(this.selectedCellIndex);\r\n  }\r\n\r\n  async moveCharacter(character, toIndex) {\r\n    const fromIndex = this.selectedCellIndex;\r\n    const path = this.calculatePath(fromIndex, toIndex, character.moveDistance);\r\n\r\n    if (!path || !path.includes(toIndex)) {\r\n      this.gamePlay.showMessage(\r\n        'Невозможно переместиться! Персонаж блокирует путь.'\r\n      );\r\n      return false;\r\n    }\r\n\r\n    const moveCost = this.calculateMoveCost(fromIndex, toIndex, character);\r\n    if (moveCost > character.currentActionPoints) {\r\n      this.gamePlay.showError('Недостаточно очков действий!');\r\n      return false;\r\n    }\r\n\r\n    await this.animateMovement(character, path);\r\n\r\n    character.currentActionPoints -= moveCost;\r\n    this.selectedCellIndex = toIndex;\r\n    this.updateCharacterPosition(character, toIndex);\r\n\r\n    this.redrawTeams();\r\n    this.updateAvailableActions();\r\n\r\n    if (this.checkTurnEnd()) {\r\n      this.switchTurn();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  calculateMoveCost(fromIndex, toIndex, character) {\r\n    const fromPos = this.indexToPosition(fromIndex);\r\n    const toPos = this.indexToPosition(toIndex);\r\n    const dx = Math.abs(fromPos.x - toPos.x);\r\n    const dy = Math.abs(fromPos.y - toPos.y);\r\n  \r\n    const isDiagonal = dx > 0 && dy > 0;\r\n    const steps = Math.max(dx, dy);\r\n  \r\n    if (character.type === 'magician' || character.type === 'daemon') {\r\n      return steps * (isDiagonal ? 3 : 2);\r\n    }\r\n    \r\n    return steps * (isDiagonal ? 2 : 1);\r\n  }\r\n\r\n  calculatePath(fromIndex, toIndex, maxDistance) {\r\n    if (fromIndex === toIndex) return [fromIndex];\r\n  \r\n    const boardSize = this.gamePlay.boardSize;\r\n    const fromPos = this.indexToPosition(fromIndex);\r\n    const toPos = this.indexToPosition(toIndex);\r\n    \r\n    const path = [fromIndex];\r\n    let currentPos = {...fromPos};\r\n    let steps = 0;\r\n  \r\n    while (steps < maxDistance && (currentPos.x !== toPos.x || currentPos.y !== toPos.y)) {\r\n      if (currentPos.x < toPos.x) currentPos.x++;\r\n      else if (currentPos.x > toPos.x) currentPos.x--;\r\n      \r\n      if (currentPos.y < toPos.y) currentPos.y++;\r\n      else if (currentPos.y > toPos.y) currentPos.y--;\r\n  \r\n      const nextIndex = currentPos.y * boardSize + currentPos.x;\r\n      \r\n      const charAtPos = this.gamePlay.findCharacterByPosition(\r\n        [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n        nextIndex\r\n      );\r\n      \r\n      if (charAtPos) break;\r\n      \r\n      path.push(nextIndex);\r\n      steps++;\r\n    }\r\n  \r\n    return path;\r\n  }\r\n\r\n  async animateMovement(character, path) {\r\n    const originalType = character.type;\r\n    character.type = 'moving';\r\n\r\n    for (let i = 1; i < path.length; i++) {\r\n      const toIndex = path[i];\r\n      this.updateCharacterPosition(character, toIndex);\r\n      this.redrawTeams();\r\n      await new Promise((resolve) => setTimeout(resolve, 200));\r\n    }\r\n\r\n    character.type = originalType;\r\n  }\r\n\r\n  updateCharacterPosition(character, newPosition) {\r\n    console.log(`Updating position for ${character.type} to ${newPosition}`);\r\n    \r\n    if (this.playerTeam.characters.includes(character)) {\r\n      this.positionedPlayerCharacters = this.positionedPlayerCharacters.map(\r\n        (pc) => pc.character === character\r\n          ? new PositionedCharacter(character, newPosition)\r\n          : pc\r\n      );\r\n    } else {\r\n      this.positionedEnemyCharacters = this.positionedEnemyCharacters.map(\r\n        (pc) => pc.character === character\r\n          ? new PositionedCharacter(character, newPosition)\r\n          : pc\r\n      );\r\n    }\r\n    \r\n    const checkPos = this.findPositionByCharacter(\r\n      [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n      character\r\n    );\r\n    console.assert(checkPos === newPosition, \r\n      `Position update failed for ${character.type}! Expected ${newPosition}, got ${checkPos}`);\r\n  }\r\n\r\n  showAttackMenu(attacker, target, targetIndex) {\r\n    const menuItems = [];\r\n\r\n    if (attacker.currentActionPoints >= 1) {\r\n      menuItems.push({\r\n        text: `Атака (1 очко)`,\r\n        action: () =>\r\n          this.performAttack(attacker, target, targetIndex, 'attack'),\r\n      });\r\n    }\r\n\r\n    if (attacker.currentActionPoints >= 2) {\r\n      menuItems.push({\r\n        text: `Сильная атака (2 очка)`,\r\n        action: () =>\r\n          this.performAttack(attacker, target, targetIndex, 'hardAttack'),\r\n      });\r\n    }\r\n\r\n    this.gamePlay.showActionMenu(targetIndex, menuItems, 'attack');\r\n  }\r\n\r\n  showDefenceButton(position) {\r\n    if (!this.selectedCharacter?.currentActionPoints) return;\r\n\r\n    const menuItems = [\r\n      {\r\n        text: `Защита (${this.selectedCharacter.currentActionPoints} очков)`,\r\n        action: () => this.performDefence(this.selectedCharacter),\r\n      },\r\n    ];\r\n\r\n    this.gamePlay.showActionMenu(position, menuItems, 'defence');\r\n  }\r\n\r\n  getPossibleMoves(position, distance) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    const moves = [];\r\n\r\n    for (let row = 0; row < boardSize; row++) {\r\n      for (let col = 0; col < boardSize; col++) {\r\n        const idx = row * boardSize + col;\r\n        const rowDiff = Math.abs(Math.floor(position / boardSize) - row);\r\n        const colDiff = Math.abs((position % boardSize) - col);\r\n\r\n        if (rowDiff + colDiff <= distance && idx !== position) {\r\n          const allChars = [\r\n            ...this.positionedPlayerCharacters,\r\n            ...this.positionedEnemyCharacters,\r\n          ];\r\n          if (!this.gamePlay.findCharacterByPosition(allChars, idx)) {\r\n            moves.push(idx);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return moves;\r\n  }\r\n\r\n  getPossibleAttacks(position, distance) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    const attacks = [];\r\n    const currentTeam =\r\n      this.gameState.currentTurn === 'player'\r\n        ? this.positionedEnemyCharacters\r\n        : this.positionedPlayerCharacters;\r\n\r\n    for (let row = 0; row < boardSize; row++) {\r\n      for (let col = 0; col < boardSize; col++) {\r\n        const idx = row * boardSize + col;\r\n        const rowDiff = Math.abs(Math.floor(position / boardSize) - row);\r\n        const colDiff = Math.abs((position % boardSize) - col);\r\n\r\n        if (rowDiff <= distance && colDiff <= distance && idx !== position) {\r\n          const char = this.gamePlay.findCharacterByPosition(currentTeam, idx);\r\n          if (char) {\r\n            attacks.push(idx);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return attacks;\r\n  }\r\n\r\n  showPossibleActions() {\r\n    if (!this.selectedCharacter) return;\r\n\r\n    this.gamePlay.deselectAllCells();\r\n    const position = this.gamePlay.findPositionByCharacter(\r\n      this.positionedPlayerCharacters,\r\n      this.selectedCharacter\r\n    );\r\n    if (position === null) return;\r\n\r\n    this.gamePlay.selectCell(position, 'yellow');\r\n\r\n    const maxDistance = Math.min(\r\n      this.selectedCharacter.moveDistance,\r\n      this.selectedCharacter.currentActionPoints\r\n    );\r\n\r\n    if (maxDistance > 0) {\r\n      this.getPossibleMoves(position, maxDistance).forEach((idx) =>\r\n        this.gamePlay.selectCell(idx, 'green')\r\n      );\r\n    }\r\n\r\n    this.getPossibleAttacks(\r\n      position,\r\n      this.selectedCharacter.attackDistance\r\n    ).forEach((idx) => this.gamePlay.selectCell(idx, 'red'));\r\n  }\r\n\r\n  async performAttack(attacker, target, targetIndex, attackType) {\r\n    if (!attacker) {\r\n      console.error('Attacker is undefined');\r\n      return;\r\n    }\r\n  \r\n    const attackerPos = this.findPositionByCharacter(\r\n      [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n      attacker\r\n    );\r\n    \r\n    if (attackerPos === null) {\r\n      console.error('Attacker position not found:', attacker);\r\n      this.gamePlay.showError(`${attacker.type}: Не могу найти позицию атакующего!`);\r\n      return;\r\n    }\r\n  \r\n    const distance = attacker.calculateDistance(\r\n      this.indexToPosition(attackerPos),\r\n      this.indexToPosition(targetIndex)\r\n    );\r\n  \r\n    if (distance > attacker.attackDistance) {\r\n      if (attacker.team === 'player') {\r\n        this.gamePlay.showError('Враг слишком далеко!');\r\n      }\r\n      return;\r\n    }\r\n    \r\n    const cost = attackType === 'attack' ? 1 : 2;\r\n    if (attacker.currentActionPoints < cost) {\r\n      this.gamePlay.showError('Недостаточно очков действий!');\r\n      return;\r\n    }\r\n  \r\n    const attack = attacker.actions[attackType]();\r\n    const damage = Math.round(attack.damage);\r\n    \r\n    await this.gamePlay.showDamage(targetIndex, damage, attack.isCritical);\r\n    \r\n    target.takeDamage(damage);\r\n    attacker.currentActionPoints -= attack.cost;\r\n    \r\n    this.gamePlay.hideActionMenu();\r\n    this.redrawTeams();\r\n    \r\n    if (target.health <= 0) {\r\n      this.handleCharacterDeath(target);\r\n    }\r\n    \r\n    if (this.checkTurnEnd()) {\r\n      this.switchTurn();\r\n    }\r\n  }\r\n\r\n  handleCharacterDeath(character) {\r\n    character.die();\r\n    this.gamePlay.showMessage(`${character.type} погиб!`);\r\n    this.redrawTeams();\r\n\r\n    if (this.checkWinConditions()) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  performDefence(character) {\r\n    const defenceBonus = character.currentActionPoints * 5;\r\n    character.defence += defenceBonus;\r\n    character.currentActionPoints = 0;\r\n\r\n    this.gamePlay.showMessage(\r\n      `${character.type} усилил защиту на ${defenceBonus} очков!`\r\n    );\r\n    this.gamePlay.hideActionMenu();\r\n    this.redrawTeams();\r\n    this.updateAvailableActions();\r\n\r\n    if (this.checkTurnEnd()) {\r\n      this.switchTurn();\r\n    }\r\n  }\r\n\r\n  indexToPosition(index) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    return {\r\n      x: index % boardSize,\r\n      y: Math.floor(index / boardSize),\r\n    };\r\n  }\r\n\r\n  updateActionPointsDisplay() {\r\n    const actionPointsElement = document.getElementById('action-points');\r\n    if (!actionPointsElement) return;\r\n\r\n    let html = '<h3>Очки действий:</h3>';\r\n    this.playerTeam.characters.forEach((char) => {\r\n      html += `<p>${char.type}: ${char.currentActionPoints}/${char.actionPoints}</p>`;\r\n    });\r\n\r\n    actionPointsElement.innerHTML = html;\r\n  }\r\n\r\n  checkTurnEnd() {\r\n    return this.playerTeam.characters\r\n      .filter(c => !c.isDead)\r\n      .every(c => c.currentActionPoints <= 0);\r\n  }\r\n\r\n  async switchTurn() {\r\n    this.gamePlay.deselectAllCells();\r\n    this.gamePlay.hideActionMenu();\r\n  \r\n    if (this.gameState.currentTurn === 'player') {\r\n      this.enemyTeam.characters.forEach((c) => c.resetActionPoints());\r\n    } else {\r\n      this.playerTeam.characters.forEach((c) => c.resetActionPoints());\r\n    }\r\n  \r\n    this.gameState.currentTurn = \r\n      this.gameState.currentTurn === 'player' ? 'enemy' : 'player';\r\n    this.updateTurnIndicator();\r\n  \r\n    if (this.gameState.currentTurn === 'enemy' && !this.isGameLocked) {\r\n      await this.makeEnemyMove();\r\n    }\r\n  }\r\n\r\n  async makeEnemyMove() {\r\n    console.log('Starting enemy move. Current positions:', {\r\n      players: this.positionedPlayerCharacters.map(pc => `${pc.character.type}:${pc.position}`),\r\n      enemies: this.positionedEnemyCharacters.map(pc => `${pc.character.type}:${pc.position}`)\r\n    });\r\n    if (await this.checkWinConditions()) {\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const activeEnemies = this.positionedEnemyCharacters\r\n        .filter(pc => !pc.character.isDead && pc.character.currentActionPoints > 0)\r\n        .sort((a, b) => b.character.attackDistance - a.character.attackDistance);\r\n  \r\n      for (const positionedChar of activeEnemies) {\r\n        const enemy = positionedChar.character;\r\n        const enemyPos = positionedChar.position;\r\n        \r\n        const targets = this.positionedPlayerCharacters\r\n          .filter(pc => !pc.character.isDead)\r\n          .map(pc => ({\r\n            character: pc.character,\r\n            position: pc.position,\r\n            distance: enemy.calculateDistance(\r\n              this.indexToPosition(enemyPos),\r\n              this.indexToPosition(pc.position)\r\n            )\r\n          }));\r\n  \r\n        if (targets.length === 0) continue;\r\n  \r\n        const sortedTargets = targets.sort((a, b) => {\r\n          if (a.distance === b.distance) {\r\n            return a.character.health - b.character.health;\r\n          }\r\n          return a.distance - b.distance;\r\n        });\r\n  \r\n        const attackableTargets = sortedTargets.filter(t => \r\n          t.distance <= enemy.attackDistance\r\n        );\r\n  \r\n        if (attackableTargets.length > 0) {\r\n          await this.performAttack(\r\n            enemy,\r\n            attackableTargets[0].character,\r\n            attackableTargets[0].position,\r\n            'attack'\r\n          );\r\n          if (await this.checkWinConditions()) return;\r\n          continue;\r\n        }\r\n  \r\n        const nearestTarget = sortedTargets[0];\r\n        const path = this.calculatePath(\r\n          enemyPos,\r\n          nearestTarget.position,\r\n          enemy.moveDistance\r\n        );\r\n  \r\n        if (path && path.length > 1) {\r\n          const moveToIndex = path[Math.min(path.length - 1, enemy.moveDistance)];\r\n          const moveCost = this.calculateMoveCost(enemyPos, moveToIndex, enemy);\r\n          \r\n          if (moveCost <= enemy.currentActionPoints) {\r\n            await this.moveEnemyCharacter(enemy, moveToIndex);\r\n            if (await this.checkWinConditions()) return;\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('AI move error:', error);\r\n    } finally {\r\n      this.switchTurn();\r\n    }\r\n  }\r\n\r\n  getAttackTargets(enemy, enemyPos, playerChars) {\r\n    return playerChars.filter((playerChar) => {\r\n      const distance = enemy.calculateDistance(\r\n        this.indexToPosition(enemyPos),\r\n        this.indexToPosition(playerChar.position)\r\n      );\r\n      return distance <= enemy.attackDistance;\r\n    });\r\n  }\r\n\r\n  async moveTowardsNearestPlayer(enemy, enemyPos, playerChars) {\r\n    const nearestPlayer = playerChars.reduce((prev, current) => {\r\n      const prevDistance = enemy.calculateDistance(\r\n        this.indexToPosition(enemyPos),\r\n        this.indexToPosition(prev.position)\r\n      );\r\n      const currentDistance = enemy.calculateDistance(\r\n        this.indexToPosition(enemyPos),\r\n        this.indexToPosition(current.position)\r\n      );\r\n      return currentDistance < prevDistance ? current : prev;\r\n    });\r\n\r\n    const path = this.calculatePath(\r\n      enemyPos,\r\n      nearestPlayer.position,\r\n      enemy.moveDistance\r\n    );\r\n\r\n    if (path && path.length > 1) {\r\n      const moveToIndex = path[Math.min(path.length - 1, enemy.moveDistance)];\r\n      await this.moveEnemyCharacter(enemy, moveToIndex);\r\n    }\r\n  }\r\n\r\n  async moveEnemyCharacter(character, toIndex) {\r\n    try {\r\n      const fromIndex = this.findPositionByCharacter(\r\n        [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n        character\r\n      );\r\n      \r\n      if (fromIndex === null || typeof fromIndex !== 'number') {\r\n        console.error('Cannot find character position before move:', character);\r\n        return false;\r\n      }\r\n  \r\n      const path = this.calculatePath(fromIndex, toIndex, character.moveDistance);\r\n      if (!path || !path.includes(toIndex)) {\r\n        return false;\r\n      }\r\n  \r\n      const moveCost = this.calculateMoveCost(fromIndex, toIndex, character);\r\n      if (moveCost > character.currentActionPoints) {\r\n        return false;\r\n      }\r\n  \r\n      await this.animateMovement(character, path);\r\n      character.currentActionPoints -= moveCost;\r\n      this.updateCharacterPosition(character, toIndex);\r\n      this.redrawTeams();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error in moveEnemyCharacter:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  findPositionByCharacter(positionedCharacters, character) {\r\n    const allPositionedChars = [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters\r\n    ];\r\n    \r\n    const positionedChar = allPositionedChars.find(\r\n      (pc) => pc.character === character\r\n    );\r\n    \r\n    if (!positionedChar) {\r\n      console.error('Character not found:', {\r\n        character,\r\n        allPositionedChars: allPositionedChars.map(pc => ({\r\n          type: pc.character.type,\r\n          position: pc.position,\r\n          isDead: pc.character.isDead\r\n        }))\r\n      });\r\n    }\r\n    \r\n    return positionedChar ? positionedChar.position : null;\r\n  }\r\n}\r\n"],"names":["module","exports","options","element","document","createElement","setAttributes","attributes","insert","___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_IMPORT_3___","___CSS_LOADER_URL_IMPORT_4___","___CSS_LOADER_URL_IMPORT_5___","___CSS_LOADER_URL_IMPORT_6___","___CSS_LOADER_URL_IMPORT_7___","___CSS_LOADER_URL_IMPORT_8___","___CSS_LOADER_URL_IMPORT_9___","___CSS_LOADER_URL_IMPORT_10___","___CSS_LOADER_URL_IMPORT_11___","___CSS_LOADER_URL_IMPORT_12___","___CSS_LOADER_URL_IMPORT_13___","___CSS_LOADER_URL_IMPORT_14___","___CSS_LOADER_URL_IMPORT_15___","___CSS_LOADER_URL_IMPORT_16___","___CSS_LOADER_URL_IMPORT_17___","___CSS_LOADER_URL_IMPORT_18___","___CSS_LOADER_URL_IMPORT_19___","___CSS_LOADER_URL_IMPORT_20___","___CSS_LOADER_URL_IMPORT_21___","___CSS_LOADER_URL_IMPORT_22___","___CSS_LOADER_URL_IMPORT_23___","___CSS_LOADER_URL_IMPORT_24___","___CSS_LOADER_URL_IMPORT_25___","___CSS_LOADER_URL_IMPORT_26___","___CSS_LOADER_URL_IMPORT_27___","___CSS_LOADER_URL_IMPORT_28___","___CSS_LOADER_URL_IMPORT_29___","___CSS_LOADER_URL_IMPORT_30___","___CSS_LOADER_URL_IMPORT_31___","___CSS_LOADER_URL_IMPORT_32___","___CSS_LOADER_URL_IMPORT_33___","___CSS_LOADER_URL_IMPORT_34___","___CSS_LOADER_URL_IMPORT_35___","___CSS_LOADER_URL_IMPORT_36___","___CSS_LOADER_URL_IMPORT_37___","___CSS_LOADER_URL_IMPORT_38___","___CSS_LOADER_URL_IMPORT_39___","___CSS_LOADER_URL_IMPORT_40___","___CSS_LOADER_URL_IMPORT_41___","___CSS_LOADER_URL_IMPORT_42___","___CSS_LOADER_URL_IMPORT_43___","___CSS_LOADER_URL_IMPORT_44___","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","___CSS_LOADER_URL_REPLACEMENT_6___","___CSS_LOADER_URL_REPLACEMENT_7___","___CSS_LOADER_URL_REPLACEMENT_8___","___CSS_LOADER_URL_REPLACEMENT_9___","___CSS_LOADER_URL_REPLACEMENT_10___","___CSS_LOADER_URL_REPLACEMENT_11___","___CSS_LOADER_URL_REPLACEMENT_12___","___CSS_LOADER_URL_REPLACEMENT_13___","___CSS_LOADER_URL_REPLACEMENT_14___","___CSS_LOADER_URL_REPLACEMENT_15___","___CSS_LOADER_URL_REPLACEMENT_16___","___CSS_LOADER_URL_REPLACEMENT_17___","___CSS_LOADER_URL_REPLACEMENT_18___","___CSS_LOADER_URL_REPLACEMENT_19___","___CSS_LOADER_URL_REPLACEMENT_20___","___CSS_LOADER_URL_REPLACEMENT_21___","___CSS_LOADER_URL_REPLACEMENT_22___","___CSS_LOADER_URL_REPLACEMENT_23___","___CSS_LOADER_URL_REPLACEMENT_24___","___CSS_LOADER_URL_REPLACEMENT_25___","___CSS_LOADER_URL_REPLACEMENT_26___","___CSS_LOADER_URL_REPLACEMENT_27___","___CSS_LOADER_URL_REPLACEMENT_28___","___CSS_LOADER_URL_REPLACEMENT_29___","___CSS_LOADER_URL_REPLACEMENT_30___","___CSS_LOADER_URL_REPLACEMENT_31___","___CSS_LOADER_URL_REPLACEMENT_32___","___CSS_LOADER_URL_REPLACEMENT_33___","___CSS_LOADER_URL_REPLACEMENT_34___","___CSS_LOADER_URL_REPLACEMENT_35___","___CSS_LOADER_URL_REPLACEMENT_36___","___CSS_LOADER_URL_REPLACEMENT_37___","___CSS_LOADER_URL_REPLACEMENT_38___","___CSS_LOADER_URL_REPLACEMENT_39___","___CSS_LOADER_URL_REPLACEMENT_40___","___CSS_LOADER_URL_REPLACEMENT_41___","___CSS_LOADER_URL_REPLACEMENT_42___","___CSS_LOADER_URL_REPLACEMENT_43___","___CSS_LOADER_URL_REPLACEMENT_44___","push","id","css","styleElement","styleSheet","cssText","firstChild","removeChild","appendChild","createTextNode","item","content","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceMapping","join","url","String","__esModule","default","test","slice","hash","needQuotes","replace","nonce","setAttribute","stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","idCountMap","identifiers","base","count","indexByIdentifier","obj","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","cssWithMappingToString","toString","this","map","needLayer","modules","dedupe","undefined","alreadyImportedModules","k","_k","memo","style","target","styleTarget","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","insertStyleElement","styleTagTransform","apply","parentNode","removeStyleElement","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","src","scripts","getElementsByTagName","p","b","baseURI","self","href","nc","calcTileType","boardSize","topRightCell","bottomRightCell","bottomLeftCell","locals","Character","constructor","level","type","health","maxHealth","moveDistance","attackDistance","actionPoints","currentActionPoints","team","isDead","levelUp","actions","attack","damage","cost","hardAttack","defence","resurrect","moveCost","straight","diagonal","newHealth","Math","min","improvementFactor","max","round","resetActionPoints","calculateDistance","pos1","pos2","dx","abs","x","dy","y","canAttack","targetPosition","position","getMoveCost","fromIndex","toIndex","fromCol","floor","takeDamage","die","PositionedCharacter","character","Team","characters","generateTeam","allowedTypes","maxLevel","characterCount","generator","RandomCharacter","random","randomLevel","characterGenerator","next","value","GameState","from","object","currentTurn","maxScore","currentLevel","playerTeam","enemyTeam","positionedPlayerCharacters","positionedEnemyCharacters","serialize","safeSerialize","Array","isArray","serialized","keys","forEach","isGameLocked","GameStateService","storage","gamePlay","save","state","gameState","setItem","showMessage","error","console","showError","load","parse","getItem","log","Bowman","super","isCritical","Swordsman","Magician","healthRestored","Daemon","Undead","Vampire","container","boardEl","cells","cellClickListeners","cellEnterListeners","cellLeaveListeners","newGameListeners","saveGameListeners","loadGameListeners","bindToDOM","HTMLElement","drawUi","theme","checkBinding","innerHTML","newGameEl","saveGameEl","loadGameEl","addEventListener","event","onNewGameClick","onSaveGameClick","onLoadGameClick","classList","add","cellEl","onCellEnter","onCellLeave","onCellClick","children","updateStats","levelEl","getElementById","scoreEl","textContent","redrawPositions","positions","cell","charEl","healthEl","healthIndicatorEl","width","addCellClickListener","callback","addCellEnterListener","addCellLeaveListener","addNewGameListener","addSaveGameListener","addLoadGameListener","findCharacterByPosition","positionedCharacters","find","c","findPositionByCharacter","positionedChar","preventDefault","indexOf","currentTarget","setCursor","cursorType","cursor","message","errorElement","setTimeout","messageElement","selectCell","color","deselectCell","deselectAllCells","_","hideActionMenu","querySelectorAll","menu","showActionMenu","items","className","button","text","stopPropagation","action","showAttackRange","filter","pc","enemy","showDamage","existingDamage","contains","damageEl","Promise","resolve","once","showCellTooltip","oldTooltip","tooltip","removeCellTooltip","stateService","localStorage","gameCtrl","playerTypes","enemyTypes","maxCharacters","selectedCharacter","selectedCellIndex","isCharacterSelected","movingCharacter","movingPath","themes","checkWinConditions","allEnemiesDead","every","allPlayersDead","score","calculateScore","nextLevel","lockGame","increaseScore","healthPercentage","generateTeams","redrawTeams","resetCharactersActionPoints","updateTurnIndicator","reduce","char","points","saveGame","loadGame","loadedState","restoreTeam","types","charData","CharClass","t","name","toLowerCase","restoreActionsAndMoveCost","tempChar","restorePositioned","positioned","setupEventListeners","newGame","positionedChars","init","actualCount","positionCharacters","allowedColumns","usedPositions","Set","maxPossible","availablePositions","flatMap","col","row","pos","has","allPositionedCharacters","bind","turnElement","warn","allChars","getAllCharacters","clickedChar","proto","getPrototypeOf","includes","selectCharacter","showAttackMenu","moveCharacter","updateAvailableActions","showPossibleActions","updateActionPointsDisplay","showDefenceButton","path","calculatePath","calculateMoveCost","animateMovement","updateCharacterPosition","checkTurnEnd","switchTurn","fromPos","indexToPosition","toPos","isDiagonal","steps","maxDistance","currentPos","nextIndex","originalType","newPosition","checkPos","assert","attacker","targetIndex","menuItems","performAttack","performDefence","getPossibleMoves","distance","moves","idx","getPossibleAttacks","attacks","currentTeam","rowDiff","colDiff","attackType","attackerPos","handleCharacterDeath","defenceBonus","actionPointsElement","html","makeEnemyMove","players","enemies","activeEnemies","sort","enemyPos","targets","sortedTargets","attackableTargets","nearestTarget","moveToIndex","moveEnemyCharacter","getAttackTargets","playerChars","playerChar","moveTowardsNearestPlayer","nearestPlayer","prev","current","prevDistance","allPositionedChars"],"sourceRoot":""}