{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://js-advanced-diploma/./src/css/style.css","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://js-advanced-diploma/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://js-advanced-diploma/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://js-advanced-diploma/./node_modules/css-loader/dist/runtime/api.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://js-advanced-diploma/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://js-advanced-diploma/webpack/bootstrap","webpack://js-advanced-diploma/webpack/runtime/compat get default export","webpack://js-advanced-diploma/webpack/runtime/define property getters","webpack://js-advanced-diploma/webpack/runtime/global","webpack://js-advanced-diploma/webpack/runtime/hasOwnProperty shorthand","webpack://js-advanced-diploma/webpack/runtime/publicPath","webpack://js-advanced-diploma/webpack/runtime/jsonp chunk loading","webpack://js-advanced-diploma/webpack/runtime/nonce","webpack://js-advanced-diploma/./src/css/style.css?9fcd","webpack://js-advanced-diploma/./src/js/utils.js","webpack://js-advanced-diploma/./src/js/Character.js","webpack://js-advanced-diploma/./src/js/PositionedCharacter.js","webpack://js-advanced-diploma/./src/js/Team.js","webpack://js-advanced-diploma/./src/js/generators.js","webpack://js-advanced-diploma/./src/js/GameState.js","webpack://js-advanced-diploma/./src/js/GameStateService.js","webpack://js-advanced-diploma/./src/js/characters/Bowman.js","webpack://js-advanced-diploma/./src/js/characters/Swordsman.js","webpack://js-advanced-diploma/./src/js/characters/Magician.js","webpack://js-advanced-diploma/./src/js/characters/Daemon.js","webpack://js-advanced-diploma/./src/js/characters/Undead.js","webpack://js-advanced-diploma/./src/js/characters/Vampire.js","webpack://js-advanced-diploma/./src/js/app.js","webpack://js-advanced-diploma/./src/js/GamePlay.js","webpack://js-advanced-diploma/./src/js/GameController.js"],"sourcesContent":["\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"../img/prairie/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"../img/prairie/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"../img/prairie/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"../img/prairie/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"../img/prairie/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_5___ = new URL(\"../img/prairie/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_6___ = new URL(\"../img/prairie/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_7___ = new URL(\"../img/prairie/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_8___ = new URL(\"../img/prairie/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_9___ = new URL(\"../img/desert/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_10___ = new URL(\"../img/desert/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_11___ = new URL(\"../img/desert/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_12___ = new URL(\"../img/desert/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_13___ = new URL(\"../img/desert/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_14___ = new URL(\"../img/desert/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_15___ = new URL(\"../img/desert/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_16___ = new URL(\"../img/desert/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_17___ = new URL(\"../img/desert/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_18___ = new URL(\"../img/arctic/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_19___ = new URL(\"../img/arctic/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_20___ = new URL(\"../img/arctic/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_21___ = new URL(\"../img/arctic/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_22___ = new URL(\"../img/arctic/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_23___ = new URL(\"../img/arctic/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_24___ = new URL(\"../img/arctic/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_25___ = new URL(\"../img/arctic/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_26___ = new URL(\"../img/arctic/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_27___ = new URL(\"../img/mountain/map-tile-top-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_28___ = new URL(\"../img/mountain/map-tile-top.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_29___ = new URL(\"../img/mountain/map-tile-top-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_30___ = new URL(\"../img/mountain/map-tile-bottom-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_31___ = new URL(\"../img/mountain/map-tile-bottom.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_32___ = new URL(\"../img/mountain/map-tile-bottom-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_33___ = new URL(\"../img/mountain/map-tile-left.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_34___ = new URL(\"../img/mountain/map-tile-right.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_35___ = new URL(\"../img/mountain/map-tile-center.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_36___ = new URL(\"../img/characters/moving.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_37___ = new URL(\"../img/characters/bowman.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_38___ = new URL(\"../img/characters/daemon.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_39___ = new URL(\"../img/characters/magician.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_40___ = new URL(\"../img/characters/swordsman.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_41___ = new URL(\"../img/characters/undead.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_42___ = new URL(\"../img/characters/vampire.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_43___ = new URL(\"../img/characters/zombie.png\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_44___ = new URL(\"../img/characters/dead.png\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\nvar ___CSS_LOADER_URL_REPLACEMENT_9___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_9___);\nvar ___CSS_LOADER_URL_REPLACEMENT_10___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_10___);\nvar ___CSS_LOADER_URL_REPLACEMENT_11___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_11___);\nvar ___CSS_LOADER_URL_REPLACEMENT_12___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_12___);\nvar ___CSS_LOADER_URL_REPLACEMENT_13___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_13___);\nvar ___CSS_LOADER_URL_REPLACEMENT_14___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_14___);\nvar ___CSS_LOADER_URL_REPLACEMENT_15___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_15___);\nvar ___CSS_LOADER_URL_REPLACEMENT_16___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_16___);\nvar ___CSS_LOADER_URL_REPLACEMENT_17___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_17___);\nvar ___CSS_LOADER_URL_REPLACEMENT_18___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_18___);\nvar ___CSS_LOADER_URL_REPLACEMENT_19___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_19___);\nvar ___CSS_LOADER_URL_REPLACEMENT_20___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_20___);\nvar ___CSS_LOADER_URL_REPLACEMENT_21___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_21___);\nvar ___CSS_LOADER_URL_REPLACEMENT_22___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_22___);\nvar ___CSS_LOADER_URL_REPLACEMENT_23___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_23___);\nvar ___CSS_LOADER_URL_REPLACEMENT_24___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_24___);\nvar ___CSS_LOADER_URL_REPLACEMENT_25___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_25___);\nvar ___CSS_LOADER_URL_REPLACEMENT_26___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_26___);\nvar ___CSS_LOADER_URL_REPLACEMENT_27___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_27___);\nvar ___CSS_LOADER_URL_REPLACEMENT_28___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_28___);\nvar ___CSS_LOADER_URL_REPLACEMENT_29___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_29___);\nvar ___CSS_LOADER_URL_REPLACEMENT_30___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_30___);\nvar ___CSS_LOADER_URL_REPLACEMENT_31___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_31___);\nvar ___CSS_LOADER_URL_REPLACEMENT_32___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_32___);\nvar ___CSS_LOADER_URL_REPLACEMENT_33___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_33___);\nvar ___CSS_LOADER_URL_REPLACEMENT_34___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_34___);\nvar ___CSS_LOADER_URL_REPLACEMENT_35___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_35___);\nvar ___CSS_LOADER_URL_REPLACEMENT_36___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_36___);\nvar ___CSS_LOADER_URL_REPLACEMENT_37___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_37___);\nvar ___CSS_LOADER_URL_REPLACEMENT_38___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_38___);\nvar ___CSS_LOADER_URL_REPLACEMENT_39___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_39___);\nvar ___CSS_LOADER_URL_REPLACEMENT_40___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_40___);\nvar ___CSS_LOADER_URL_REPLACEMENT_41___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_41___);\nvar ___CSS_LOADER_URL_REPLACEMENT_42___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_42___);\nvar ___CSS_LOADER_URL_REPLACEMENT_43___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_43___);\nvar ___CSS_LOADER_URL_REPLACEMENT_44___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_44___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root {\\r\\n  --cell-size: 64px;\\r\\n}\\r\\n\\r\\nhtml, body {\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  background: #000;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\n.btn {\\r\\n  display: inline-block;\\r\\n  font-weight: 400;\\r\\n  color: #212529;\\r\\n  background-color: #f8f9fa;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n  padding: .375rem .75rem;\\r\\n  font-size: 1rem;\\r\\n  line-height: 1.5;\\r\\n  border-radius: .25rem;\\r\\n  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n\\r\\n  &:hover {\\r\\n    background-color:rgb(195, 197, 199);\\r\\n    transition: color 0.2s;\\r\\n  }\\r\\n}\\r\\n\\r\\n.controls {\\r\\n  text-align: center;\\r\\n  margin: 50px 0;\\r\\n}\\r\\n\\r\\n.game-info {\\r\\n  background-color: #000;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n.turn-indicator {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.game-message {\\r\\n  color: #4CAF50;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n.game-error {\\r\\n  color: #F44336;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n#game-board {\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n.board-container {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  flex-wrap: wrap;\\r\\n}\\r\\n\\r\\n.board {\\r\\n  display: grid;\\r\\n  grid-template-columns: repeat(8, 1fr);\\r\\n  grid-column-gap: 2px;\\r\\n  grid-row-gap: 2px;\\r\\n}\\r\\n\\r\\n.cell {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.cell.selected::before {\\r\\n  content: '';\\r\\n  display: block;\\r\\n  border: 4px;\\r\\n  border-radius: 32px;\\r\\n  box-sizing: border-box;\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  opacity: 0.9;\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n.cell.selected-yellow::before {\\r\\n  border-color: #ff0;\\r\\n  border-style: solid;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-green::before {\\r\\n  border-color: #0f0;\\r\\n  border-style: dashed;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-red::before {\\r\\n  border-color: #f00;\\r\\n  border-style: dashed;\\r\\n}\\r\\n\\r\\n.cell:hover {\\r\\n  cursor: default;\\r\\n}\\r\\n\\r\\n.cell:hover .custom-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.custom-tooltip {\\r\\n  position: absolute;\\r\\n  z-index: 9999;\\r\\n  bottom: 100%;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  background-color: rgba(0, 0, 0, 0.8);\\r\\n  color: white;\\r\\n  border-radius: 4px;\\r\\n  min-width: 250px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n  font-size: 10px;\\r\\n  pointer-events: none;\\r\\n  display: flex; \\r\\n}\\r\\n\\r\\n\\r\\n.custom-tooltip .character-type {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.board.prairie {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \");\\r\\n}\\r\\n\\r\\n.board.desert {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_9___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_10___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_11___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_12___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_13___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_14___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_15___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_16___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_17___ + \");\\r\\n}\\r\\n\\r\\n.board.arctic {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_18___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_19___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_20___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_21___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_22___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_23___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_24___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_25___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_26___ + \");\\r\\n}\\r\\n\\r\\n.board.mountain {\\r\\n  --map-tile-top-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_27___ + \");\\r\\n  --map-tile-top-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_28___ + \");\\r\\n  --map-tile-top-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_29___ + \");\\r\\n  --map-tile-bottom-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_30___ + \");\\r\\n  --map-tile-bottom-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_31___ + \");\\r\\n  --map-tile-bottom-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_32___ + \");\\r\\n  --map-tile-left-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_33___ + \");\\r\\n  --map-tile-right-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_34___ + \");\\r\\n  --map-tile-center-url: url(\" + ___CSS_LOADER_URL_REPLACEMENT_35___ + \");\\r\\n}\\r\\n\\r\\n.map-tile {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n}\\r\\n\\r\\n.map-tile-top-left {\\r\\n  background: var(--map-tile-top-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-top {\\r\\n  background: var(--map-tile-top-url);\\r\\n}\\r\\n\\r\\n.map-tile-top-right {\\r\\n  background: var(--map-tile-top-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-left {\\r\\n  background: var(--map-tile-bottom-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom {\\r\\n  background: var(--map-tile-bottom-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-right {\\r\\n  background: var(--map-tile-bottom-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-left {\\r\\n  background: var(--map-tile-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-right {\\r\\n  background: var(--map-tile-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-center {\\r\\n  background: var(--map-tile-center-url);\\r\\n}\\r\\n\\r\\n.character {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  position: absolute;\\r\\n  z-index: 1001;\\r\\n}\\r\\n\\r\\n.character.moving {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_36___ + \");\\r\\n}\\r\\n\\r\\n.character.bowman {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_37___ + \");\\r\\n}\\r\\n\\r\\n.character.daemon {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_38___ + \");\\r\\n}\\r\\n\\r\\n.character.magician {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_39___ + \");\\r\\n}\\r\\n\\r\\n.character.swordsman {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_40___ + \");\\r\\n}\\r\\n\\r\\n.character.undead {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_41___ + \");\\r\\n}\\r\\n\\r\\n.character.vampire {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_42___ + \");\\r\\n}\\r\\n\\r\\n.character.zombie {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_43___ + \");\\r\\n}\\r\\n\\r\\n.character.dead {\\r\\n  background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_44___ + \");\\r\\n  opacity: 0.7;\\r\\n  filter: grayscale(70%);\\r\\n  pointer-events: none;\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.character:hover {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.character.dead:hover {\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.health-level {\\r\\n  top: 2px;\\r\\n  left: 7px;\\r\\n  position: absolute;\\r\\n  width: 50px;\\r\\n  height: 4px;\\r\\n  background: #000;\\r\\n}\\r\\n\\r\\n.health-level-indicator {\\r\\n  height: 4px;\\r\\n}\\r\\n\\r\\n.health-level-indicator-high {\\r\\n  background: #0f0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-normal {\\r\\n  background: #ff0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-critical {\\r\\n  background: #f00;\\r\\n}\\r\\n\\r\\n// Меню выбора действий\\r\\n\\r\\n.action-menu {\\r\\n  z-index: 1002;\\r\\n  position: absolute;\\r\\n  background: rgba(0, 0, 0, 0.9);\\r\\n}\\r\\n\\r\\n.attack-menu {\\r\\n  left: 100%;\\r\\n  top: 50%;\\r\\n  transform: translateY(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.defence-menu {\\r\\n  left: 50%;\\r\\n  bottom: -50%;\\r\\n  transform: translateX(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.resurrect-menu {\\r\\n  left: 50%;\\r\\n  top: -50%;\\r\\n  transform: translateX(-50%);\\r\\n}\\r\\n\\r\\n.action-button {\\r\\n  background: #333;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  margin: 2px;\\r\\n  cursor: pointer;\\r\\n  border-radius: 3px;\\r\\n  text-align: left;\\r\\n  white-space: nowrap;\\r\\n}\\r\\n\\r\\n.action-button:hover {\\r\\n  background: #555;\\r\\n}\\r\\n\\r\\n// анимация перемещения\\r\\n\\r\\n.character.moving {\\r\\n  transition: transform 0.2s ease-in-out;\\r\\n  transform: scale(1.1);\\r\\n  filter: brightness(1.2);\\r\\n}\\r\\n\\r\\n#action-points {\\r\\n  position: absolute;\\r\\n  top: 10px;\\r\\n  right: 10px;\\r\\n  background: rgba(0, 0, 0, 0.7);\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  border-radius: 5px;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n#action-points h3 {\\r\\n  margin: 0 0 5px 0;\\r\\n  font-size: 1em;\\r\\n}\\r\\n\\r\\n#action-points p {\\r\\n  margin: 2px 0;\\r\\n  font-size: 0.9em;\\r\\n}\\r\\n\\r\\n/* Анимация урона */\\r\\n.damage {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  color: #ff0;\\r\\n  font-weight: bold;\\r\\n  font-size: 1.2em;\\r\\n  z-index: 2000;\\r\\n  pointer-events: none;\\r\\n  text-shadow: 0 0 3px black;\\r\\n  will-change: transform, opacity;\\r\\n  animation: damageAnimation 1s forwards;\\r\\n}\\r\\n\\r\\n.damage.critical {\\r\\n  color: red;\\r\\n  animation: criticalHit 1s forwards;\\r\\n  z-index: 2000;\\r\\n}\\r\\n\\r\\n@keyframes damageAnimation {\\r\\n  0% { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) translateY(-100px) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n@keyframes criticalHit {\\r\\n  0% { transform: translateX(-50%) scale(1); opacity: 1; }\\r\\n  50% { transform: translateX(-50%) scale(2); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n/* Меню статиситки игры */\\r\\n\\r\\n#game-stats {\\r\\n  display: block;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n\\r\\n}\\r\\n\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/css/style.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,iBAAiB;AACnB;;AAEA;EACE,YAAY;EACZ,SAAS;AACX;;AAEA;EACE,gBAAgB;EAChB,eAAe;AACjB;;AAEA;EACE,qBAAqB;EACrB,gBAAgB;EAChB,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,sBAAsB;EACtB,uBAAuB;EACvB,eAAe;EACf,gBAAgB;EAChB,qBAAqB;EACrB,8HAA8H;EAC9H,YAAY;EACZ,eAAe;;EAEf;IACE,mCAAmC;IACnC,sBAAsB;EACxB;AACF;;AAEA;EACE,kBAAkB;EAClB,cAAc;AAChB;;AAEA;EACE,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,qCAAqC;AACvC;;AAEA;EACE,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,gBAAgB;AAClB;;AAEA;EACE,cAAc;EACd,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,qCAAqC;EACrC,oBAAoB;EACpB,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,WAAW;EACX,cAAc;EACd,WAAW;EACX,mBAAmB;EACnB,sBAAsB;EACtB,uBAAuB;EACvB,wBAAwB;EACxB,YAAY;EACZ,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;EACpB,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,YAAY;EACZ,SAAS;EACT,2BAA2B;EAC3B,oCAAoC;EACpC,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,kBAAkB;EAClB,qCAAqC;EACrC,eAAe;EACf,oBAAoB;EACpB,aAAa;AACf;;;AAGA;EACE,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;AACpB;;AAEA;EACE,gEAAoE;EACpE,2DAA0D;EAC1D,iEAAsE;EACtE,mEAA0E;EAC1E,8DAAgE;EAChE,oEAA4E;EAC5E,4DAA4D;EAC5D,6DAA8D;EAC9D,8DAAgE;AAClE;;AAEA;EACE,gEAAmE;EACnE,4DAAyD;EACzD,kEAAqE;EACrE,oEAAyE;EACzE,+DAA+D;EAC/D,qEAA2E;EAC3E,6DAA2D;EAC3D,8DAA6D;EAC7D,+DAA+D;AACjE;;AAEA;EACE,iEAAmE;EACnE,4DAAyD;EACzD,kEAAqE;EACrE,oEAAyE;EACzE,+DAA+D;EAC/D,qEAA2E;EAC3E,6DAA2D;EAC3D,8DAA6D;EAC7D,+DAA+D;AACjE;;AAEA;EACE,iEAAqE;EACrE,4DAA2D;EAC3D,kEAAuE;EACvE,oEAA2E;EAC3E,+DAAiE;EACjE,qEAA6E;EAC7E,6DAA6D;EAC7D,8DAA+D;EAC/D,+DAAiE;AACnE;;AAEA;EACE,uBAAuB;EACvB,wBAAwB;AAC1B;;AAEA;EACE,wCAAwC;AAC1C;;AAEA;EACE,mCAAmC;AACrC;;AAEA;EACE,yCAAyC;AAC3C;;AAEA;EACE,2CAA2C;AAC7C;;AAEA;EACE,sCAAsC;AACxC;;AAEA;EACE,4CAA4C;AAC9C;;AAEA;EACE,oCAAoC;AACtC;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sCAAsC;AACxC;;AAEA;EACE,uBAAuB;EACvB,wBAAwB;EACxB,kBAAkB;EAClB,aAAa;AACf;;AAEA;EACE,oDAA+C;AACjD;;AAEA;EACE,oDAA+C;AACjD;;AAEA;EACE,oDAA+C;AACjD;;AAEA;EACE,oDAAiD;AACnD;;AAEA;EACE,oDAAkD;AACpD;;AAEA;EACE,oDAA+C;AACjD;;AAEA;EACE,oDAAgD;AAClD;;AAEA;EACE,oDAA+C;AACjD;;AAEA;EACE,oDAA6C;EAC7C,YAAY;EACZ,sBAAsB;EACtB,oBAAoB;EACpB,mBAAmB;AACrB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,QAAQ;EACR,SAAS;EACT,kBAAkB;EAClB,WAAW;EACX,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;;;EAGE,aAAa;EACb,kBAAkB;EAClB,8BAA8B;AAChC;;AAEA;EACE,UAAU;EACV,QAAQ;EACR,2BAA2B;EAC3B,kBAAkB;EAClB,aAAa;AACf;;AAEA;EACE,SAAS;EACT,YAAY;EACZ,2BAA2B;EAC3B,kBAAkB;EAClB,aAAa;AACf;;AAEA;EACE,SAAS;EACT,SAAS;EACT,2BAA2B;AAC7B;;AAEA;EACE,gBAAgB;EAChB,YAAY;EACZ,YAAY;EACZ,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;;;EAGE,sCAAsC;EACtC,qBAAqB;EACrB,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,WAAW;EACX,8BAA8B;EAC9B,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,qCAAqC;AACvC;;AAEA;EACE,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,gBAAgB;AAClB;;AAEA,mBAAmB;AACnB;EACE,kBAAkB;EAClB,MAAM;EACN,SAAS;EACT,2BAA2B;EAC3B,WAAW;EACX,iBAAiB;EACjB,gBAAgB;EAChB,aAAa;EACb,oBAAoB;EACpB,0BAA0B;EAC1B,+BAA+B;EAC/B,sCAAsC;AACxC;;AAEA;EACE,UAAU;EACV,kCAAkC;EAClC,aAAa;AACf;;AAEA;EACE,KAAK,kDAAkD,EAAE,UAAU,EAAE;EACrE,OAAO,yDAAyD,EAAE,UAAU,EAAE;AAChF;;AAEA;EACE,KAAK,oCAAoC,EAAE,UAAU,EAAE;EACvD,MAAM,oCAAoC,EAAE,UAAU,EAAE;EACxD,OAAO,sCAAsC,EAAE,UAAU,EAAE;AAC7D;;AAEA,yBAAyB;;AAEzB;EACE,cAAc;EACd,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,qCAAqC;;AAEvC\",\"sourcesContent\":[\":root {\\r\\n  --cell-size: 64px;\\r\\n}\\r\\n\\r\\nhtml, body {\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  background: #000;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\n.btn {\\r\\n  display: inline-block;\\r\\n  font-weight: 400;\\r\\n  color: #212529;\\r\\n  background-color: #f8f9fa;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n  padding: .375rem .75rem;\\r\\n  font-size: 1rem;\\r\\n  line-height: 1.5;\\r\\n  border-radius: .25rem;\\r\\n  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n\\r\\n  &:hover {\\r\\n    background-color:rgb(195, 197, 199);\\r\\n    transition: color 0.2s;\\r\\n  }\\r\\n}\\r\\n\\r\\n.controls {\\r\\n  text-align: center;\\r\\n  margin: 50px 0;\\r\\n}\\r\\n\\r\\n.game-info {\\r\\n  background-color: #000;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n.turn-indicator {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.game-message {\\r\\n  color: #4CAF50;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n.game-error {\\r\\n  color: #F44336;\\r\\n  min-height: 20px;\\r\\n}\\r\\n\\r\\n#game-board {\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n.board-container {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  flex-wrap: wrap;\\r\\n}\\r\\n\\r\\n.board {\\r\\n  display: grid;\\r\\n  grid-template-columns: repeat(8, 1fr);\\r\\n  grid-column-gap: 2px;\\r\\n  grid-row-gap: 2px;\\r\\n}\\r\\n\\r\\n.cell {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.cell.selected::before {\\r\\n  content: '';\\r\\n  display: block;\\r\\n  border: 4px;\\r\\n  border-radius: 32px;\\r\\n  box-sizing: border-box;\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  opacity: 0.9;\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n.cell.selected-yellow::before {\\r\\n  border-color: #ff0;\\r\\n  border-style: solid;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-green::before {\\r\\n  border-color: #0f0;\\r\\n  border-style: dashed;\\r\\n  display: block; \\r\\n}\\r\\n\\r\\n.cell.selected-red::before {\\r\\n  border-color: #f00;\\r\\n  border-style: dashed;\\r\\n}\\r\\n\\r\\n.cell:hover {\\r\\n  cursor: default;\\r\\n}\\r\\n\\r\\n.cell:hover .custom-tooltip {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.custom-tooltip {\\r\\n  position: absolute;\\r\\n  z-index: 9999;\\r\\n  bottom: 100%;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  background-color: rgba(0, 0, 0, 0.8);\\r\\n  color: white;\\r\\n  border-radius: 4px;\\r\\n  min-width: 250px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n  font-size: 10px;\\r\\n  pointer-events: none;\\r\\n  display: flex; \\r\\n}\\r\\n\\r\\n\\r\\n.custom-tooltip .character-type {\\r\\n  font-size: 1.2em;\\r\\n  font-weight: bold;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n\\r\\n.board.prairie {\\r\\n  --map-tile-top-left-url: url('../img/prairie/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/prairie/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/prairie/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/prairie/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/prairie/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/prairie/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/prairie/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/prairie/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/prairie/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.board.desert {\\r\\n  --map-tile-top-left-url: url('../img/desert/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/desert/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/desert/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/desert/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/desert/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/desert/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/desert/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/desert/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/desert/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.board.arctic {\\r\\n  --map-tile-top-left-url: url('../img/arctic/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/arctic/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/arctic/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/arctic/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/arctic/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/arctic/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/arctic/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/arctic/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/arctic/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.board.mountain {\\r\\n  --map-tile-top-left-url: url('../img/mountain/map-tile-top-left.png');\\r\\n  --map-tile-top-url: url('../img/mountain/map-tile-top.png');\\r\\n  --map-tile-top-right-url: url('../img/mountain/map-tile-top-right.png');\\r\\n  --map-tile-bottom-left-url: url('../img/mountain/map-tile-bottom-left.png');\\r\\n  --map-tile-bottom-url: url('../img/mountain/map-tile-bottom.png');\\r\\n  --map-tile-bottom-right-url: url('../img/mountain/map-tile-bottom-right.png');\\r\\n  --map-tile-left-url: url('../img/mountain/map-tile-left.png');\\r\\n  --map-tile-right-url: url('../img/mountain/map-tile-right.png');\\r\\n  --map-tile-center-url: url('../img/mountain/map-tile-center.png');\\r\\n}\\r\\n\\r\\n.map-tile {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n}\\r\\n\\r\\n.map-tile-top-left {\\r\\n  background: var(--map-tile-top-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-top {\\r\\n  background: var(--map-tile-top-url);\\r\\n}\\r\\n\\r\\n.map-tile-top-right {\\r\\n  background: var(--map-tile-top-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-left {\\r\\n  background: var(--map-tile-bottom-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom {\\r\\n  background: var(--map-tile-bottom-url);\\r\\n}\\r\\n\\r\\n.map-tile-bottom-right {\\r\\n  background: var(--map-tile-bottom-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-left {\\r\\n  background: var(--map-tile-left-url);\\r\\n}\\r\\n\\r\\n.map-tile-right {\\r\\n  background: var(--map-tile-right-url);\\r\\n}\\r\\n\\r\\n.map-tile-center {\\r\\n  background: var(--map-tile-center-url);\\r\\n}\\r\\n\\r\\n.character {\\r\\n  width: var(--cell-size);\\r\\n  height: var(--cell-size);\\r\\n  position: absolute;\\r\\n  z-index: 1001;\\r\\n}\\r\\n\\r\\n.character.moving {\\r\\n  background: url('../img/characters/moving.png');\\r\\n}\\r\\n\\r\\n.character.bowman {\\r\\n  background: url('../img/characters/bowman.png');\\r\\n}\\r\\n\\r\\n.character.daemon {\\r\\n  background: url('../img/characters/daemon.png');\\r\\n}\\r\\n\\r\\n.character.magician {\\r\\n  background: url('../img/characters/magician.png');\\r\\n}\\r\\n\\r\\n.character.swordsman {\\r\\n  background: url('../img/characters/swordsman.png');\\r\\n}\\r\\n\\r\\n.character.undead {\\r\\n  background: url('../img/characters/undead.png');\\r\\n}\\r\\n\\r\\n.character.vampire {\\r\\n  background: url('../img/characters/vampire.png');\\r\\n}\\r\\n\\r\\n.character.zombie {\\r\\n  background: url('../img/characters/zombie.png');\\r\\n}\\r\\n\\r\\n.character.dead {\\r\\n  background: url('../img/characters/dead.png');\\r\\n  opacity: 0.7;\\r\\n  filter: grayscale(70%);\\r\\n  pointer-events: none;\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.character:hover {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.character.dead:hover {\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.health-level {\\r\\n  top: 2px;\\r\\n  left: 7px;\\r\\n  position: absolute;\\r\\n  width: 50px;\\r\\n  height: 4px;\\r\\n  background: #000;\\r\\n}\\r\\n\\r\\n.health-level-indicator {\\r\\n  height: 4px;\\r\\n}\\r\\n\\r\\n.health-level-indicator-high {\\r\\n  background: #0f0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-normal {\\r\\n  background: #ff0;\\r\\n}\\r\\n\\r\\n.health-level-indicator-critical {\\r\\n  background: #f00;\\r\\n}\\r\\n\\r\\n// Меню выбора действий\\r\\n\\r\\n.action-menu {\\r\\n  z-index: 1002;\\r\\n  position: absolute;\\r\\n  background: rgba(0, 0, 0, 0.9);\\r\\n}\\r\\n\\r\\n.attack-menu {\\r\\n  left: 100%;\\r\\n  top: 50%;\\r\\n  transform: translateY(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.defence-menu {\\r\\n  left: 50%;\\r\\n  bottom: -50%;\\r\\n  transform: translateX(-50%);\\r\\n  position: absolute;\\r\\n  z-index: 1999;\\r\\n}\\r\\n\\r\\n.resurrect-menu {\\r\\n  left: 50%;\\r\\n  top: -50%;\\r\\n  transform: translateX(-50%);\\r\\n}\\r\\n\\r\\n.action-button {\\r\\n  background: #333;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 8px 12px;\\r\\n  margin: 2px;\\r\\n  cursor: pointer;\\r\\n  border-radius: 3px;\\r\\n  text-align: left;\\r\\n  white-space: nowrap;\\r\\n}\\r\\n\\r\\n.action-button:hover {\\r\\n  background: #555;\\r\\n}\\r\\n\\r\\n// анимация перемещения\\r\\n\\r\\n.character.moving {\\r\\n  transition: transform 0.2s ease-in-out;\\r\\n  transform: scale(1.1);\\r\\n  filter: brightness(1.2);\\r\\n}\\r\\n\\r\\n#action-points {\\r\\n  position: absolute;\\r\\n  top: 10px;\\r\\n  right: 10px;\\r\\n  background: rgba(0, 0, 0, 0.7);\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  border-radius: 5px;\\r\\n  font-family: 'Courier New', monospace;\\r\\n}\\r\\n\\r\\n#action-points h3 {\\r\\n  margin: 0 0 5px 0;\\r\\n  font-size: 1em;\\r\\n}\\r\\n\\r\\n#action-points p {\\r\\n  margin: 2px 0;\\r\\n  font-size: 0.9em;\\r\\n}\\r\\n\\r\\n/* Анимация урона */\\r\\n.damage {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  color: #ff0;\\r\\n  font-weight: bold;\\r\\n  font-size: 1.2em;\\r\\n  z-index: 2000;\\r\\n  pointer-events: none;\\r\\n  text-shadow: 0 0 3px black;\\r\\n  will-change: transform, opacity;\\r\\n  animation: damageAnimation 1s forwards;\\r\\n}\\r\\n\\r\\n.damage.critical {\\r\\n  color: red;\\r\\n  animation: criticalHit 1s forwards;\\r\\n  z-index: 2000;\\r\\n}\\r\\n\\r\\n@keyframes damageAnimation {\\r\\n  0% { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) translateY(-100px) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n@keyframes criticalHit {\\r\\n  0% { transform: translateX(-50%) scale(1); opacity: 1; }\\r\\n  50% { transform: translateX(-50%) scale(2); opacity: 1; }\\r\\n  100% { transform: translateX(-50%) scale(1.5); opacity: 0; }\\r\\n}\\r\\n\\r\\n/* Меню статиситки игры */\\r\\n\\r\\n#game-stats {\\r\\n  display: block;\\r\\n  color: white;\\r\\n  padding: 10px;\\r\\n  text-align: center;\\r\\n  font-family: 'Courier New', monospace;\\r\\n\\r\\n}\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/**\r\n * @todo\r\n * @param index - индекс поля\r\n * @param boardSize - размер квадратного поля (в длину или ширину)\r\n * @returns строка - тип ячейки на поле:\r\n *\r\n * top-left\r\n * top-right\r\n * top\r\n * bottom-left\r\n * bottom-right\r\n * bottom\r\n * right\r\n * left\r\n * center\r\n *\r\n * @example\r\n * ```js\r\n * calcTileType(0, 8); // 'top-left'\r\n * calcTileType(1, 8); // 'top'\r\n * calcTileType(63, 8); // 'bottom-right'\r\n * calcTileType(7, 7); // 'left'\r\n * ```\r\n * */\r\nexport function calcTileType(index, boardSize) {\r\n  const topLeftCell = 0;\r\n  const topRightCell = boardSize - 1;\r\n  const bottomRightCell = boardSize * boardSize - 1;\r\n  const bottomLeftCell = bottomRightCell - (boardSize - 1);\r\n\r\n  if (index === topLeftCell) return 'top-left';\r\n  if (index === topRightCell) return 'top-right';\r\n  if (index === bottomLeftCell) return 'bottom-left';\r\n  if (index === bottomRightCell) return 'bottom-right';\r\n\r\n  if (index < topRightCell) return 'top';\r\n  if (index > bottomLeftCell) return 'bottom';\r\n\r\n  if (index % boardSize === 0) return 'left';\r\n  if (index % boardSize === boardSize - 1) return 'right';\r\n  \r\n  return 'center';\r\n}\r\n\r\nexport function calcHealthLevel(health) {\r\n  if (health < 15) {\r\n    return 'critical';\r\n  }\r\n\r\n  if (health < 50) {\r\n    return 'normal';\r\n  }\r\n\r\n  return 'high';\r\n}\r\n","export default class Character {\r\n  constructor(level, type = \"moving\") {\r\n    if (typeof level !== 'number' || level < 1) {\r\n      throw new Error('Level must be a positive number');\r\n    }\r\n    this.level = level;\r\n    this.health = 50;\r\n    this.maxHealth = 100;\r\n    this.type = type;\r\n    this.moveDistance = 1;\r\n    this.attackDistance = 1;\r\n    this.actionPoints = 4;\r\n    this.currentActionPoints = 4;\r\n    this.team = 'player'; \r\n    this.isDead = false;\r\n\r\n    for (let i = 1; i < level; i++) {\r\n      this.levelUp();\r\n    }\r\n    \r\n    this.actions = {\r\n      attack: () => ({ damage: 10, cost: 1 }),\r\n      hardAttack: () => ({ damage: 15, cost: 2 }),\r\n      defence: () => ({ defence: this.defence * 2, cost: this.currentActionPoints }),\r\n      resurrect: () => ({ health: this.maxHealth / 2, cost: 2 })\r\n    };\r\n    \r\n    this.moveCost = {\r\n      straight: 1,\r\n      diagonal: 1 \r\n    };\r\n  }\r\n\r\n  levelUp() {\r\n    this.level++;\r\n    const newHealth = this.health + 80;\r\n    this.health = Math.min(newHealth, this.maxHealth);\r\n    \r\n    const healthPercentage = this.health / this.maxHealth * 100;\r\n    const improvementFactor = (80 + healthPercentage) / 100;\r\n    \r\n    if (typeof this.attack === 'number') {\r\n      this.attack = Math.max(this.attack, Math.round(this.attack * improvementFactor));\r\n    }\r\n    \r\n    if (typeof this.defence === 'number') {\r\n      this.defence = Math.max(this.defence, Math.round(this.defence * improvementFactor));\r\n    }\r\n    \r\n    this.resetActionPoints();\r\n  }\r\n\r\n  calculateDistance(pos1, pos2) {\r\n    const dx = Math.abs(pos1.x - pos2.x);\r\n    const dy = Math.abs(pos1.y - pos2.y);\r\n    return Math.max(dx, dy);\r\n  }\r\n\r\n  canAttack(targetPosition) {\r\n    return this.calculateDistance(this.position, targetPosition) <= this.attackDistance;\r\n  }\r\n\r\n  getMoveCost(fromIndex, toIndex, boardSize) {\r\n    const fromRow = Math.floor(fromIndex / boardSize);\r\n    const fromCol = fromIndex % boardSize;\r\n    const toRow = Math.floor(toIndex / boardSize);\r\n    const toCol = toIndex % boardSize;\r\n    \r\n    const isDiagonal = (fromRow !== toRow) && (fromCol !== toCol);\r\n    return isDiagonal ? this.moveCost.diagonal : this.moveCost.straight;\r\n  }\r\n\r\n  resetActionPoints() {\r\n    this.currentActionPoints = this.actionPoints;\r\n  }\r\n\r\n  takeDamage(damage) {\r\n    this.health -= damage;\r\n    if (this.health <= 0) {\r\n      this.die();\r\n    }\r\n    return this.health;\r\n  }\r\n\r\n  die() {\r\n    this.isDead = true;\r\n    this.health = 0;\r\n    this.currentActionPoints = 0; \r\n  }\r\n}\r\n","import Character from './Character.js';\r\n\r\nexport class PositionedCharacter {\r\n  constructor(character, position) {\r\n    if (!(character instanceof Character)) {\r\n      throw new Error('character must be instance of Character or its children');\r\n    }\r\n\r\n    if (typeof position !== 'number') {\r\n      throw new Error('position must be a number');\r\n    }\r\n\r\n    this.character = character;\r\n    this.position = position;\r\n  }\r\n}","/**\r\n * Класс, представляющий персонажей команды\r\n *\r\n * @todo Самостоятельно продумайте хранение персонажей в классе\r\n * Например\r\n * @example\r\n * ```js\r\n * const characters = [new Swordsman(2), new Bowman(1)]\r\n * const team = new Team(characters);\r\n *\r\n * team.characters // [swordsman, bowman]\r\n * ```\r\n * */\r\nexport default class Team {\r\n  // TODO: write your logic here\r\n  constructor(characters = []) {\r\n    this.characters = characters;\r\n  }\r\n}\r\n","/**\r\n * Формирует экземпляр персонажа из массива allowedTypes со\r\n * случайным уровнем от 1 до maxLevel\r\n *\r\n * @param allowedTypes массив классов\r\n * @param maxLevel максимальный возможный уровень персонажа\r\n * @returns генератор, который при каждом вызове\r\n * возвращает новый экземпляр класса персонажа\r\n *\r\n */\r\nimport Team from './Team.js';\r\n\r\nexport function* characterGenerator(allowedTypes, maxLevel) {\r\n  // TODO: write logic here\r\n  while (true) {\r\n    const RandomCharacter = allowedTypes[Math.floor(Math.random() * allowedTypes.length)];\r\n    \r\n    const randomLevel = Math.floor(Math.random() * maxLevel) + 1;\r\n    \r\n    yield new RandomCharacter(randomLevel);\r\n  }\r\n}\r\n\r\n/**\r\n * Формирует массив персонажей на основе characterGenerator\r\n * @param allowedTypes массив классов\r\n * @param maxLevel максимальный возможный уровень персонажа\r\n * @param characterCount количество персонажей, которое нужно сформировать\r\n * @returns экземпляр Team, хранящий экземпляры персонажей. Количество персонажей в команде - characterCount\r\n * */\r\nexport function generateTeam(allowedTypes, maxLevel, characterCount) {\r\n  // TODO: write logic here\r\n  const generator = characterGenerator(allowedTypes, maxLevel);\r\n  const characters = [];\r\n  \r\n  for (let i = 0; i < characterCount; i++) {\r\n    characters.push(generator.next().value);\r\n  }\r\n  \r\n  return new Team(characters);\r\n}\r\n\r\n","import Character from \"./Character.js\";\r\nimport { PositionedCharacter } from \"./PositionedCharacter.js\";\r\n\r\nexport default class GameState {\r\n  static from(object) {\r\n    return new GameState(\r\n      object.currentTurn,\r\n      object.maxScore,\r\n      object.currentLevel,\r\n      object.playerTeam,\r\n      object.enemyTeam,\r\n      object.positionedPlayerCharacters,\r\n      object.positionedEnemyCharacters\r\n    );\r\n  }\r\n\r\n  constructor(\r\n    currentTurn = 'player',\r\n    maxScore = 0,\r\n    currentLevel = 1,\r\n    playerTeam = null,\r\n    enemyTeam = null,\r\n    positionedPlayerCharacters = [],\r\n    positionedEnemyCharacters = []\r\n  ) {\r\n    this.currentTurn = currentTurn;\r\n    this.maxScore = maxScore;\r\n    this.currentLevel = currentLevel;\r\n    this.playerTeam = playerTeam;\r\n    this.enemyTeam = enemyTeam;\r\n    this.positionedPlayerCharacters = positionedPlayerCharacters;\r\n    this.positionedEnemyCharacters = positionedEnemyCharacters;\r\n  }\r\n\r\n  serialize() {\r\n    const safeSerialize = (obj) => {\r\n      if (Array.isArray(obj)) {\r\n        return obj.map(item => safeSerialize(item));\r\n      }\r\n      if (obj instanceof PositionedCharacter) {\r\n        return {\r\n          character: safeSerialize(obj.character),\r\n          position: obj.position\r\n        };\r\n      }\r\n      if (obj instanceof Character) {\r\n        const serialized = {};\r\n        // Сохраняем тип персонажа явно\r\n        serialized.type = obj.type;\r\n        // Копируем только нужные свойства\r\n        Object.keys(obj).forEach(key => {\r\n          if (typeof obj[key] !== 'function' && \r\n              key !== 'actions' && \r\n              key !== 'moveCost' &&\r\n              key !== 'constructor') {\r\n            serialized[key] = obj[key];\r\n          }\r\n        });\r\n        return serialized;\r\n      }\r\n      return obj;\r\n    };\r\n    \r\n    return safeSerialize({\r\n      currentTurn: this.currentTurn,\r\n      maxScore: this.maxScore,\r\n      currentLevel: this.currentLevel,\r\n      playerTeam: this.playerTeam,\r\n      enemyTeam: this.enemyTeam,\r\n      positionedPlayerCharacters: this.positionedPlayerCharacters,\r\n      positionedEnemyCharacters: this.positionedEnemyCharacters\r\n    });\r\n  }\r\n}","import GameState from './GameState.js';\r\n\r\nexport default class GameStateService {\r\n  constructor(storage, gamePlay) {\r\n    this.storage = storage;\r\n    this.gamePlay = gamePlay;\r\n  }\r\n\r\n  save(state) {\r\n    try {\r\n      const gameState = new GameState(\r\n        state.currentTurn,\r\n        state.maxScore,\r\n        state.currentLevel,\r\n        state.playerTeam,\r\n        state.enemyTeam,\r\n        state.positionedPlayerCharacters,\r\n        state.positionedEnemyCharacters\r\n      ).serialize();\r\n      \r\n      this.storage.setItem('state', JSON.stringify(gameState));\r\n      this.gamePlay.showMessage('Игра сохранена');\r\n    } catch (error) {\r\n      console.error('Ошибка сохранения:', error);\r\n      this.gamePlay.showError('Не удалось сохранить игру');\r\n    }\r\n  }\r\n\r\n  load() {\r\n    try {\r\n      const data = JSON.parse(this.storage.getItem('state'));\r\n      if (!data) throw new Error('Нет сохраненных данных');\r\n      \r\n      console.log('Loaded data:', JSON.parse(JSON.stringify(data)));\r\n      \r\n      this.gamePlay.showMessage('Игра загружена');\r\n      return GameState.from(data);\r\n    } catch (error) {\r\n      console.error('Load error:', error);\r\n      this.gamePlay.showError('Не удалось загрузить игру');\r\n      throw error;\r\n    }\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Bowman extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '15-25';\r\n    this.defence = 25;\r\n    this.type = 'bowman';\r\n    this.moveDistance = 4;\r\n    this.attackDistance = 3;\r\n    \r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 15;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      },\r\n      hardAttack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 20;\r\n        const isCritical = Math.random() < 0.1;\r\n        return {\r\n          damage: isCritical ? damage * 2 : damage,\r\n          cost: 2,\r\n          isCritical\r\n        };\r\n      },\r\n      defence: () => ({\r\n        defence: this.defence * 2\r\n      })\r\n    };\r\n\r\n    this.moveCost = {\r\n      straight: 1,\r\n      diagonal: 2\r\n    };\r\n  }\r\n}\r\n","import Character from '../Character.js';\r\n\r\nexport default class Swordsman extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '30-40';\r\n    this.defence = 10;\r\n    this.type = 'swordsman';\r\n    this.moveDistance = 4;\r\n    this.attackDistance = 1;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 30;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      },\r\n      hardAttack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 40;\r\n        const isCritical = Math.random() < 0.1;\r\n        return {\r\n          damage: isCritical ? damage * 2 : damage,\r\n          cost: 2,\r\n          isCritical\r\n        };\r\n      },\r\n      defence: () => ({\r\n        defence: this.defence * 2\r\n      })\r\n    };\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Magician extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '10-20';\r\n    this.defence = 40;\r\n    this.type = 'magician';\r\n    this.moveDistance = 2;\r\n    this.attackDistance = 4;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 10;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      },\r\n      hardAttack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 20;\r\n        const isCritical = Math.random() < 0.1;\r\n        return {\r\n          damage: isCritical ? damage * 2 : damage,\r\n          cost: 2,\r\n          isCritical\r\n        };\r\n      },\r\n      defence: () => ({\r\n        defence: this.defence * 2\r\n      })\r\n    };\r\n\r\n    this.actions.resurrect = () => ({\r\n      healthRestored: this.maxHealth / 2,\r\n      cost: 2\r\n    });\r\n\r\n    this.moveCost = {\r\n      straight: 2,\r\n      diagonal: 3\r\n    };\r\n  }\r\n}\r\n","import Character from '../Character.js';\r\n\r\nexport default class Daemon extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '10-20';\r\n    this.defence = 40;\r\n    this.type = 'daemon';\r\n    this.moveDistance = 2;\r\n    this.attackDistance = 2;\r\n    this.team = 'enemy';\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 20;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      }\r\n    };\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Undead extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '30-40';\r\n    this.defence = 10;\r\n    this.type = 'undead';\r\n    this.moveDistance = 4;\r\n    this.attackDistance = 2;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 30;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical\r\n        };\r\n      }\r\n    };\r\n  }\r\n}","import Character from '../Character.js';\r\n\r\nexport default class Vampire extends Character {\r\n  constructor(level) {\r\n    super(level);\r\n    this.attack = '15-25';\r\n    this.defence = 25;\r\n    this.type = 'vampire';\r\n    this.moveDistance = 2;\r\n    this.attackDistance = 2;\r\n\r\n    this.actions = {\r\n      attack: () => {\r\n        const damage = Math.floor(Math.random() * 11) + 10;\r\n        const isCritical = Math.random() < 0.15;\r\n        return {\r\n          damage: isCritical ? damage * 1.5 : damage,\r\n          cost: 1,\r\n          isCritical,\r\n        };\r\n      }\r\n    };\r\n  }\r\n}\r\n","/**\r\n * Entry point of app: don't change this\r\n */\r\nimport GamePlay from './GamePlay.js';\r\nimport GameController from './GameController.js';\r\nimport GameStateService from './GameStateService.js';\r\n\r\nconst gamePlay = new GamePlay();\r\ngamePlay.bindToDOM(document.querySelector('#game-container'));\r\n\r\nconst stateService = new GameStateService(localStorage, gamePlay);\r\n\r\nconst gameCtrl = new GameController(gamePlay, stateService);\r\ngameCtrl.init();\r\n\r\n// don't write your code here","import { calcHealthLevel, calcTileType } from './utils.js';\r\n\r\nexport default class GamePlay {\r\n  constructor() {\r\n    this.boardSize = 8;\r\n    this.container = null;\r\n    this.boardEl = null;\r\n    this.cells = [];\r\n    this.cellClickListeners = [];\r\n    this.cellEnterListeners = [];\r\n    this.cellLeaveListeners = [];\r\n    this.newGameListeners = [];\r\n    this.saveGameListeners = [];\r\n    this.loadGameListeners = [];\r\n  }\r\n\r\n  bindToDOM(container) {\r\n    if (!(container instanceof HTMLElement)) {\r\n      throw new Error('container is not HTMLElement');\r\n    }\r\n    this.container = container;\r\n  }\r\n\r\n  drawUi(theme) {\r\n    this.checkBinding();\r\n\r\n    this.container.innerHTML = `\r\n      <div class=\"controls\">\r\n        <button data-id=\"action-restart\" class=\"btn\">New Game</button>\r\n        <button data-id=\"action-save\" class=\"btn\">Save Game</button>\r\n        <button data-id=\"action-load\" class=\"btn\">Load Game</button>\r\n      </div>\r\n      <div id=\"game-stats\">\r\n        <div>Уровень: <span id=\"current-level\">1</span></div>\r\n        <div>Макс. счет: <span id=\"max-score\">0</span></div>\r\n      </div>\r\n      <div id=\"action-points\"></div>\r\n      <div class=\"board-container\">\r\n        <div data-id=\"board\" class=\"board\"></div>\r\n      </div>\r\n      <div class=\"game-info\">\r\n        <div id=\"current-turn\" class=\"turn-indicator\"></div>\r\n        <div id=\"game-message\" class=\"game-message\"></div>\r\n        <div id=\"game-error\" class=\"game-error\"></div>\r\n      </div>\r\n    `;\r\n\r\n    this.newGameEl = this.container.querySelector('[data-id=action-restart]');\r\n    this.saveGameEl = this.container.querySelector('[data-id=action-save]');\r\n    this.loadGameEl = this.container.querySelector('[data-id=action-load]');\r\n\r\n    this.newGameEl.addEventListener('click', event => this.onNewGameClick(event));\r\n    this.saveGameEl.addEventListener('click', event => this.onSaveGameClick(event));\r\n    this.loadGameEl.addEventListener('click', event => this.onLoadGameClick(event));\r\n\r\n    this.boardEl = this.container.querySelector('[data-id=board]');\r\n    this.boardEl.classList.add(theme);\r\n\r\n    for (let i = 0; i < this.boardSize ** 2; i += 1) {\r\n      const cellEl = document.createElement('div');\r\n      cellEl.classList.add('cell', 'map-tile', `map-tile-${calcTileType(i, this.boardSize)}`);\r\n      cellEl.addEventListener('mouseenter', event => this.onCellEnter(event));\r\n      cellEl.addEventListener('mouseleave', event => this.onCellLeave(event));\r\n      cellEl.addEventListener('click', event => this.onCellClick(event));\r\n      this.boardEl.appendChild(cellEl);\r\n    }\r\n\r\n    this.cells = Array.from(this.boardEl.children);\r\n  }\r\n\r\n  updateStats(level, maxScore) {\r\n    const levelEl = document.getElementById('current-level');\r\n    const scoreEl = document.getElementById('max-score');\r\n    \r\n    if (levelEl) levelEl.textContent = level;\r\n    if (scoreEl) scoreEl.textContent = maxScore;\r\n  }\r\n\r\n  redrawPositions(positions) {\r\n    this.cells.forEach(cell => cell.innerHTML = '');\r\n  \r\n    positions.forEach(position => {\r\n      const cellEl = this.boardEl.children[position.position];\r\n      const charEl = document.createElement('div');\r\n      \r\n      charEl.classList.add('character', position.character.isDead ? 'dead' : position.character.type);\r\n  \r\n      const healthEl = document.createElement('div');\r\n      healthEl.classList.add('health-level');\r\n  \r\n      const healthIndicatorEl = document.createElement('div');\r\n      healthIndicatorEl.classList.add(\r\n        'health-level-indicator', \r\n        `health-level-indicator-${calcHealthLevel(position.character.health)}`\r\n      );\r\n      healthIndicatorEl.style.width = `${position.character.health}%`;\r\n      \r\n      healthEl.appendChild(healthIndicatorEl);\r\n      charEl.appendChild(healthEl);\r\n      cellEl.appendChild(charEl);\r\n    });\r\n  }\r\n\r\n  addCellClickListener(callback) {\r\n    this.cellClickListeners.push(callback);\r\n  }\r\n\r\n  addCellEnterListener(callback) {\r\n    this.cellEnterListeners.push(callback);\r\n  }\r\n\r\n  addCellLeaveListener(callback) {\r\n    this.cellLeaveListeners.push(callback);\r\n  }\r\n\r\n  addNewGameListener(callback) {\r\n    this.newGameListeners.push(callback);\r\n  }\r\n\r\n  addSaveGameListener(callback) {\r\n    this.saveGameListeners.push(callback);\r\n  }\r\n\r\n  addLoadGameListener(callback) {\r\n    this.loadGameListeners.push(callback);\r\n  }\r\n\r\n  findCharacterByPosition(positionedCharacters, index) {\r\n    return positionedCharacters.find(c => c.position === index)?.character;\r\n  }\r\n  \r\n  findPositionByCharacter(positionedCharacters, character) {\r\n    const positionedChar = positionedCharacters.find(\r\n      (c) => c.character === character\r\n    );\r\n    if (!positionedChar) {\r\n      console.error('Character not found in positionedCharacters:', character);\r\n      console.log('Current positionedCharacters:', positionedCharacters);\r\n    }\r\n    return positionedChar ? positionedChar.position : null;\r\n  }\r\n\r\n  onCellEnter(event) {\r\n    event.preventDefault();\r\n    const index = this.cells.indexOf(event.currentTarget);\r\n    this.cellEnterListeners.forEach(o => o.call(null, index));\r\n  }\r\n\r\n  onCellLeave(event) {\r\n    this.setCursor('default');\r\n    event.preventDefault();\r\n    const index = this.cells.indexOf(event.currentTarget);\r\n    this.cellLeaveListeners.forEach(o => o.call(null, index));\r\n  }\r\n\r\n  onCellClick(event) {\r\n    const index = this.cells.indexOf(event.currentTarget);\r\n    this.cellClickListeners.forEach(o => o.call(null, index));\r\n  }\r\n\r\n  onNewGameClick(event) {\r\n    event.preventDefault();\r\n    this.newGameListeners.forEach(o => o.call(null));\r\n  }\r\n\r\n  onSaveGameClick(event) {\r\n    event.preventDefault();\r\n    this.saveGameListeners.forEach(o => o.call(null));\r\n  }\r\n\r\n  onLoadGameClick(event) {\r\n    event.preventDefault();\r\n    this.loadGameListeners.forEach(o => o.call(null));\r\n  }\r\n\r\n  setCursor(cursorType) {\r\n    this.boardEl.style.cursor = cursorType;\r\n  }\r\n\r\n  showError(message) {\r\n    const errorElement = document.getElementById('game-error');\r\n    if (errorElement) {\r\n      errorElement.textContent = message;\r\n      setTimeout(() => errorElement.textContent = '', 3000);\r\n    }\r\n  }\r\n\r\n  showMessage(message) {\r\n    const messageElement = document.getElementById('game-message');\r\n    if (messageElement) {\r\n      messageElement.textContent = message;\r\n      setTimeout(() => messageElement.textContent = '', 3000);\r\n    }\r\n  }\r\n\r\n  selectCell(index, color = 'yellow', style = 'solid') {\r\n    this.deselectCell(index);\r\n    this.cells[index].classList.add('selected', `selected-${color}`);\r\n    if (style === 'dashed') {\r\n      this.cells[index].classList.add('selected-dashed');\r\n    }\r\n  }\r\n\r\n  deselectCell(index) {\r\n    const cell = this.cells[index];\r\n    cell.classList.remove(\r\n      'selected', \r\n      'selected-yellow', \r\n      'selected-green', \r\n      'selected-red',\r\n      'selected-dashed'\r\n    );\r\n  }\r\n\r\n  deselectAllCells() {\r\n    this.cells.forEach((_, index) => this.deselectCell(index));\r\n  }\r\n\r\n  hideActionMenu() {\r\n    const menus = document.querySelectorAll('.action-menu');\r\n    menus.forEach(menu => {\r\n      try {\r\n        menu.parentNode?.removeChild(menu);\r\n      } catch (e) {\r\n        console.error('Error removing action menu:', e);\r\n      }\r\n    });\r\n  }\r\n\r\n  showActionMenu(index, items, type = 'attack') {\r\n    this.hideActionMenu();\r\n    \r\n    const menu = document.createElement('div');\r\n    menu.className = `action-menu ${type}-menu`;\r\n    \r\n    items.forEach(item => {\r\n      const button = document.createElement('button');\r\n      button.className = 'action-button';\r\n      button.textContent = item.text;\r\n      button.addEventListener('click', (e) => {\r\n        e.stopPropagation();\r\n        item.action();\r\n      });\r\n      menu.appendChild(button);\r\n    });\r\n    \r\n    const cell = this.cells[index];\r\n    cell.appendChild(menu);\r\n  }\r\n\r\n  showAttackRange(character, positionedCharacters) {\r\n    const position = this.findPositionByCharacter(positionedCharacters, character);\r\n    if (position === null) return;\r\n  \r\n    const enemyTeam = positionedCharacters.filter(pc => \r\n      pc.character.team !== character.team\r\n    );\r\n  \r\n    enemyTeam.forEach(enemy => {\r\n      const distance = character.calculateDistance(\r\n        { x: position % this.boardSize, y: Math.floor(position / this.boardSize) },\r\n        { x: enemy.position % this.boardSize, y: Math.floor(enemy.position / this.boardSize) }\r\n      );\r\n      \r\n      if (distance <= character.attackDistance) {\r\n        this.selectCell(enemy.position, 'red', 'dashed');\r\n      }\r\n    });\r\n  }\r\n\r\n  async showDamage(index, damage, isCritical = false) {\r\n    const cell = this.cells[index];\r\n    if (!cell) return;\r\n  \r\n    const existingDamage = cell.querySelector('.damage');\r\n    if (existingDamage && cell.contains(existingDamage)) {\r\n      cell.removeChild(existingDamage);\r\n    }\r\n  \r\n    const damageEl = document.createElement('div');\r\n    damageEl.className = `damage ${isCritical ? 'critical' : ''}`;\r\n    damageEl.textContent = `-${damage}`;\r\n    cell.appendChild(damageEl);\r\n  \r\n    await new Promise(resolve => {\r\n      damageEl.addEventListener('animationend', () => {\r\n        if (cell.contains(damageEl)) {\r\n          cell.removeChild(damageEl);\r\n        }\r\n        resolve();\r\n      }, { once: true });\r\n    });\r\n  }\r\n\r\n  showCellTooltip(message, index) {\r\n    const cell = this.cells[index];\r\n    if (!cell) return;\r\n  \r\n    const oldTooltip = cell.querySelector('.custom-tooltip');\r\n    if (oldTooltip) {\r\n      cell.removeChild(oldTooltip);\r\n    }\r\n  \r\n    const tooltip = document.createElement('div');\r\n    tooltip.className = 'custom-tooltip';\r\n    \r\n    tooltip.innerHTML = `\r\n      <span class=\"character-type\">${message}</span>\r\n    `;\r\n  \r\n    cell.appendChild(tooltip);\r\n    cell.tooltip = tooltip; \r\n  }\r\n  \r\n  removeCellTooltip(index) {\r\n    const cell = this.cells[index];\r\n    if (!cell) return;\r\n    \r\n    const tooltip = cell.querySelector('.custom-tooltip');\r\n    if (tooltip && cell.contains(tooltip)) {\r\n      cell.removeChild(tooltip);\r\n    }\r\n    delete cell.tooltip;\r\n  }\r\n\r\n  checkBinding() {\r\n    if (this.container === null) {\r\n      throw new Error('GamePlay not bind to DOM');\r\n    }\r\n  }\r\n}","import { PositionedCharacter } from './PositionedCharacter.js';\r\nimport { generateTeam } from './generators.js';\r\nimport Team from './Team.js';\r\nimport GameStateService from './GameStateService.js';\r\nimport GameState from './GameState.js';\r\nimport Bowman from './characters/Bowman.js';\r\nimport Swordsman from './characters/Swordsman.js';\r\nimport Magician from './characters/Magician.js';\r\nimport Daemon from './characters/Daemon.js';\r\nimport Undead from './characters/Undead.js';\r\nimport Vampire from './characters/Vampire.js';\r\n\r\nexport default class GameController {\r\n  constructor(gamePlay, stateService) {\r\n    this.gamePlay = gamePlay;\r\n    this.stateService = stateService || new GameStateService(localStorage, this.gamePlay);\r\n    this.playerTypes = [Bowman, Swordsman, Magician];\r\n    this.enemyTypes = [Daemon, Undead, Vampire];\r\n\r\n    this.maxLevel = 4;\r\n    this.maxCharacters = 3;\r\n    this.characterCount = 2;\r\n\r\n    this.playerTeam = [];\r\n    this.enemyTeam = [];\r\n    this.positionedPlayerCharacters = [];\r\n    this.positionedEnemyCharacters = [];\r\n\r\n    this.gameState = new GameState();\r\n    this.selectedCharacter = null;\r\n    this.selectedCellIndex = null;\r\n    this.isCharacterSelected = false;\r\n\r\n    this.movingCharacter = null;\r\n    this.movingPath = [];\r\n\r\n    this.currentLevel = 1;\r\n    this.maxLevel = 4;\r\n    this.themes = ['prairie', 'desert', 'arctic', 'mountain'];\r\n    this.maxScore = 0;\r\n\r\n    // this.stateService = new GameStateService(localStorage, this.gamePlay);\r\n  }\r\n\r\n  async checkWinConditions() {\r\n    const allEnemiesDead = this.positionedEnemyCharacters.every(\r\n      (pc) => pc.character.isDead || pc.character.health <= 0\r\n    );\r\n\r\n    const allPlayersDead = this.positionedPlayerCharacters.every(\r\n      (pc) => pc.character.isDead || pc.character.health <= 0\r\n    );\r\n\r\n    if (allEnemiesDead) {\r\n      const score = this.calculateScore();\r\n      this.maxScore = Math.max(this.maxScore, score);\r\n      \r\n      if (this.currentLevel < this.maxLevel) {\r\n        await this.nextLevel();\r\n      } else {\r\n        this.gamePlay.showMessage(`Поздравляем! Вы прошли все уровни! Максимальный счет: ${this.maxScore}`);\r\n        this.lockGame();\r\n      }\r\n      return true;\r\n    }\r\n\r\n    if (allPlayersDead) {\r\n      this.gamePlay.showMessage(`Игра окончена. Вы проиграли. Максимальный счет: ${this.maxScore}`);\r\n      this.lockGame();\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  async nextLevel() {\r\n    this.currentLevel++;\r\n    const theme = this.themes[this.currentLevel - 1];\r\n    \r\n    this.increaseScore(100);\r\n    \r\n    this.playerTeam.characters\r\n      .filter(c => !c.isDead)\r\n      .forEach(c => {\r\n        const newHealth = c.level + 80;\r\n        c.health = Math.min(newHealth, c.maxHealth);\r\n        \r\n        const healthPercentage = (c.health / c.maxHealth) * 100;\r\n        if (healthPercentage > 50) {\r\n          c.defence = Math.round(c.defence * 1.1); \r\n        } else if (healthPercentage > 30) {\r\n          c.defence = Math.round(c.defence * 1.05); \r\n        }\r\n        \r\n        c.levelUp();\r\n      });\r\n      \r\n    this.gamePlay.showMessage(`Уровень ${this.currentLevel}! Тема: ${theme}`);\r\n    this.gamePlay.drawUi(theme);\r\n    this.generateTeams();\r\n    this.redrawTeams();\r\n    this.resetCharactersActionPoints();\r\n    this.updateTurnIndicator();\r\n    this.updateStats();\r\n  }\r\n\r\n  calculateScore() {\r\n    return this.playerTeam.characters.reduce((score, char) => {\r\n      return score + char.level * 10 + char.health;\r\n    }, 0);\r\n  }\r\n\r\n  increaseScore(points) {\r\n    this.maxScore += points;\r\n    this.updateStats();\r\n  }\r\n\r\n  lockGame() {\r\n    this.gamePlay.deselectAllCells();\r\n    this.gamePlay.hideActionMenu();\r\n    this.isGameLocked = true;\r\n  }\r\n\r\n  updateStats() {\r\n    this.gamePlay.updateStats(this.currentLevel, this.maxScore);\r\n  }\r\n\r\n  saveGame() {\r\n    try {\r\n      const gameState = new GameState(\r\n        this.gameState.currentTurn,\r\n        this.maxScore,\r\n        this.currentLevel,\r\n        this.playerTeam,\r\n        this.enemyTeam,\r\n        this.positionedPlayerCharacters,\r\n        this.positionedEnemyCharacters\r\n      );\r\n      this.stateService.save(gameState);\r\n    } catch (error) {\r\n      this.gamePlay.showError('Ошибка при сохранении игры');\r\n      console.error('Save error:', error);\r\n    }\r\n  }\r\n  \r\n  async loadGame() {\r\n    this.isGameLocked = false;\r\n    try {\r\n      const loadedState = this.stateService.load();\r\n      \r\n      const restoreTeam = (team, types) => {\r\n        if (!team || !team.characters) return team;\r\n        \r\n        // Создаём новый экземпляр Team с восстановленными персонажами\r\n        const restoredTeam = new Team();\r\n        restoredTeam.characters = team.characters.map(charData => {\r\n          const CharClass = types.find(t => t.name.toLowerCase() === charData.type);\r\n          if (!CharClass) {\r\n            console.error('Character class not found:', charData.type);\r\n            return charData;\r\n          }\r\n          \r\n          const character = new CharClass(charData.level);\r\n          \r\n          // Копируем все свойства кроме функций и специальных полей\r\n          Object.keys(charData).forEach(key => {\r\n            if (key !== 'actions' && key !== 'moveCost' && key !== 'constructor') {\r\n              character[key] = charData[key];\r\n            }\r\n          });\r\n          \r\n          return character;\r\n        });\r\n        return restoredTeam;\r\n      };\r\n  \r\n      const restorePositionedCharacter = (character, position) => {\r\n        return new PositionedCharacter(character, position);\r\n      };\r\n  \r\n      this.maxScore = loadedState.maxScore;\r\n      this.currentLevel = loadedState.currentLevel;\r\n      this.gameState.currentTurn = loadedState.currentTurn;\r\n      \r\n      // Восстанавливаем команды с правильными экземплярами классов\r\n      this.playerTeam = restoreTeam(loadedState.playerTeam, this.playerTypes);\r\n      this.enemyTeam = restoreTeam(loadedState.enemyTeam, this.enemyTypes);\r\n  \r\n      // Восстанавливаем позиционированных персонажей\r\n      this.positionedPlayerCharacters = loadedState.positionedPlayerCharacters.map(pc => {\r\n        const char = this.playerTeam.characters.find(c => \r\n          c.type === pc.character.type && \r\n          c.level === pc.character.level\r\n        ) || pc.character;\r\n        return restorePositionedCharacter(char, pc.position);\r\n      });\r\n  \r\n      this.positionedEnemyCharacters = loadedState.positionedEnemyCharacters.map(pc => {\r\n        const char = this.enemyTeam.characters.find(c => \r\n          c.type === pc.character.type && \r\n          c.level === pc.character.level\r\n        ) || pc.character;\r\n        return restorePositionedCharacter(char, pc.position);\r\n      });\r\n  \r\n      const theme = this.themes[this.currentLevel - 1];\r\n      this.gamePlay.drawUi(theme);\r\n      \r\n      this.setupEventListeners();\r\n      this.gamePlay.addNewGameListener(() => this.newGame());\r\n      this.gamePlay.addSaveGameListener(() => this.saveGame());\r\n      this.gamePlay.addLoadGameListener(() => this.loadGame());\r\n      \r\n      this.redrawTeams();\r\n      this.updateTurnIndicator();\r\n      this.updateStats();\r\n      this.resetCharactersActionPoints();\r\n      \r\n    } catch (error) {\r\n      console.error('Load error:', error);\r\n      this.gamePlay.showError('Не удалось загрузить игру');\r\n      this.newGame();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    try {\r\n      const theme = this.themes[this.currentLevel - 1];\r\n      this.gamePlay.drawUi(theme);\r\n      this.generateTeams();\r\n      this.redrawTeams();\r\n      this.setupEventListeners();\r\n      \r\n      this.gamePlay.addNewGameListener(() => this.newGame());\r\n      this.gamePlay.addSaveGameListener(() => this.saveGame());\r\n      this.gamePlay.addLoadGameListener(() => this.loadGame());\r\n  \r\n      this.gamePlay.setCursor = (cursorType) => {\r\n        this.gamePlay.boardEl.style.cursor = cursorType;\r\n      };\r\n      this.gamePlay.setCursor('default');\r\n    } catch (error) {\r\n      this.gamePlay.showError(error.message);\r\n    }\r\n    this.updateTurnIndicator();\r\n    this.resetCharactersActionPoints();\r\n    this.updateStats();\r\n  }\r\n\r\n  newGame() {\r\n    this.currentLevel = 1;\r\n    this.isGameLocked = false;\r\n    const theme = this.themes[this.currentLevel - 1];\r\n    this.gamePlay.drawUi(theme);\r\n    this.generateTeams();\r\n    this.redrawTeams();\r\n    this.resetCharactersActionPoints();\r\n    this.updateTurnIndicator();\r\n    this.updateStats();\r\n  }\r\n\r\n  resetCharactersActionPoints() {\r\n    this.playerTeam.characters.forEach((c) => {\r\n      if (!c.isDead) c.resetActionPoints();\r\n    });\r\n    this.enemyTeam.characters.forEach((c) => {\r\n      if (!c.isDead) c.resetActionPoints();\r\n    });\r\n  }\r\n\r\n  generateTeams() {\r\n    const actualCount = Math.min(this.characterCount, this.maxCharacters);\r\n    this.playerTeam = generateTeam(\r\n      this.playerTypes,\r\n      this.maxLevel,\r\n      actualCount\r\n    );\r\n    this.enemyTeam = generateTeam(this.enemyTypes, this.maxLevel, actualCount);\r\n\r\n    this.positionedPlayerCharacters = this.positionCharacters(\r\n      this.playerTeam.characters,\r\n      [0, 1]\r\n    );\r\n    this.positionedEnemyCharacters = this.positionCharacters(\r\n      this.enemyTeam.characters,\r\n      [6, 7]\r\n    );\r\n  }\r\n\r\n  positionCharacters(characters, allowedColumns) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    const usedPositions = new Set();\r\n    const maxPossible = boardSize * allowedColumns.length;\r\n\r\n    if (characters.length > maxPossible) {\r\n      throw new Error(`Недостаточно места для ${characters.length} персонажей`);\r\n    }\r\n\r\n    return characters.map((character) => {\r\n      const availablePositions = allowedColumns\r\n        .flatMap((col) =>\r\n          Array.from({ length: boardSize }, (_, row) => row * boardSize + col)\r\n        )\r\n        .filter((pos) => !usedPositions.has(pos));\r\n\r\n      const position =\r\n        availablePositions[\r\n          Math.floor(Math.random() * availablePositions.length)\r\n        ];\r\n      usedPositions.add(position);\r\n\r\n      return new PositionedCharacter(character, position);\r\n    });\r\n  }\r\n\r\n  redrawTeams() {\r\n    const allPositionedCharacters = [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters,\r\n    ];\r\n    this.gamePlay.redrawPositions(allPositionedCharacters);\r\n  }\r\n\r\n  setupEventListeners() {\r\n    this.gamePlay.cellClickListeners = [];\r\n    this.gamePlay.cellEnterListeners = [];\r\n    this.gamePlay.cellLeaveListeners = [];\r\n\r\n    this.gamePlay.addCellClickListener(this.onCellClick.bind(this));\r\n    this.gamePlay.addCellEnterListener(this.onCellEnter.bind(this));\r\n    this.gamePlay.addCellLeaveListener(this.onCellLeave.bind(this));\r\n  }\r\n\r\n  updateTurnIndicator() {\r\n    const turnElement = document.getElementById('current-turn');\r\n    if (!turnElement) return;\r\n\r\n    if (this.gameState.currentTurn === 'player') {\r\n      turnElement.textContent = 'Ваш ход';\r\n      turnElement.className = 'player-turn';\r\n    } else {\r\n      turnElement.textContent = 'Ход противника';\r\n      turnElement.className = 'enemy-turn';\r\n    }\r\n  }\r\n\r\n  onCellClick(index) {\r\n    if (this.isGameLocked) {\r\n      console.warn('Game is locked!');\r\n      return;\r\n    }\r\n    \r\n    const allChars = this.getAllCharacters();\r\n    const clickedChar = this.gamePlay.findCharacterByPosition(allChars, index);\r\n    \r\n    if (!clickedChar) {\r\n      console.log('No character at position', index);\r\n    } else {\r\n      console.log('Clicked character:', {\r\n        type: clickedChar.type,\r\n        team: clickedChar.team,\r\n        isDead: clickedChar.isDead,\r\n        proto: Object.getPrototypeOf(clickedChar)\r\n      });\r\n    }\r\n\r\n    if (clickedChar) {\r\n      if (this.playerTeam.characters.includes(clickedChar)) {\r\n        this.selectCharacter(clickedChar, index);\r\n      } else if (this.isCharacterSelected) {\r\n        this.showAttackMenu(this.selectedCharacter, clickedChar, index);\r\n      }\r\n    } else if (this.isCharacterSelected) {\r\n      this.moveCharacter(this.selectedCharacter, index);\r\n    }\r\n  }\r\n\r\n  onCellEnter(index) {\r\n    const allChars = [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters,\r\n    ];\r\n    const positionedChar = allChars.find(pc => pc.position === index);\r\n    \r\n    if (positionedChar) {\r\n      const cursor = positionedChar.character.isDead ? 'not-allowed' : 'pointer';\r\n      this.gamePlay.setCursor(cursor);\r\n      \r\n      if (!positionedChar.character.isDead) {\r\n        this.gamePlay.showCellTooltip(\r\n          `${positionedChar.character.type} \\n (🎖${positionedChar.character.level} ⚔${positionedChar.character.attack} 🛡${positionedChar.character.defence} ❤${positionedChar.character.health})`,\r\n          index\r\n        );\r\n      } else {\r\n        this.gamePlay.removeCellTooltip(index);\r\n      }\r\n    } else {\r\n      this.gamePlay.setCursor('default');\r\n      this.gamePlay.removeCellTooltip(index);\r\n    }\r\n  }\r\n\r\n  onCellLeave(index) {\r\n    this.gamePlay.removeCellTooltip(index);\r\n    this.gamePlay.setCursor('default');\r\n  }\r\n\r\n  getAllCharacters() {\r\n    return [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters\r\n    ].filter(pc => !pc.character.isDead);\r\n  }\r\n\r\n  selectCharacter(character, position) {\r\n    this.gamePlay.deselectAllCells();\r\n    this.gamePlay.hideActionMenu();\r\n\r\n    this.selectedCharacter = character;\r\n    this.selectedCellIndex = position;\r\n    this.isCharacterSelected = true;\r\n\r\n    this.gamePlay.selectCell(position, 'yellow');\r\n    this.updateAvailableActions();\r\n  }\r\n\r\n  updateAvailableActions() {\r\n    if (!this.selectedCharacter) return;\r\n\r\n    this.showPossibleActions();\r\n    this.updateActionPointsDisplay();\r\n    this.showDefenceButton(this.selectedCellIndex);\r\n  }\r\n\r\n  async moveCharacter(character, toIndex) {\r\n    const fromIndex = this.selectedCellIndex;\r\n    const path = this.calculatePath(fromIndex, toIndex, character.moveDistance);\r\n\r\n    if (!path || !path.includes(toIndex)) {\r\n      this.gamePlay.showMessage(\r\n        'Невозможно переместиться! Персонаж блокирует путь.'\r\n      );\r\n      return false;\r\n    }\r\n\r\n    const moveCost = this.calculateMoveCost(fromIndex, toIndex, character);\r\n    if (moveCost > character.currentActionPoints) {\r\n      this.gamePlay.showError('Недостаточно очков действий!');\r\n      return false;\r\n    }\r\n\r\n    await this.animateMovement(character, path);\r\n\r\n    character.currentActionPoints -= moveCost;\r\n    this.selectedCellIndex = toIndex;\r\n    this.updateCharacterPosition(character, toIndex);\r\n\r\n    this.redrawTeams();\r\n    this.updateAvailableActions();\r\n\r\n    if (this.checkTurnEnd()) {\r\n      this.switchTurn();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  calculateMoveCost(fromIndex, toIndex, character) {\r\n    const fromPos = this.indexToPosition(fromIndex);\r\n    const toPos = this.indexToPosition(toIndex);\r\n    const dx = Math.abs(fromPos.x - toPos.x);\r\n    const dy = Math.abs(fromPos.y - toPos.y);\r\n  \r\n    const isDiagonal = dx > 0 && dy > 0;\r\n    const steps = Math.max(dx, dy);\r\n  \r\n    if (character.type === 'magician' || character.type === 'daemon') {\r\n      return steps * (isDiagonal ? 3 : 2);\r\n    }\r\n    \r\n    return steps * (isDiagonal ? 2 : 1);\r\n  }\r\n\r\n  calculatePath(fromIndex, toIndex, maxDistance) {\r\n    if (fromIndex === toIndex) return [fromIndex];\r\n  \r\n    const boardSize = this.gamePlay.boardSize;\r\n    const fromPos = this.indexToPosition(fromIndex);\r\n    const toPos = this.indexToPosition(toIndex);\r\n    \r\n    const path = [fromIndex];\r\n    let currentPos = {...fromPos};\r\n    let steps = 0;\r\n  \r\n    while (steps < maxDistance && (currentPos.x !== toPos.x || currentPos.y !== toPos.y)) {\r\n      if (currentPos.x < toPos.x) currentPos.x++;\r\n      else if (currentPos.x > toPos.x) currentPos.x--;\r\n      \r\n      if (currentPos.y < toPos.y) currentPos.y++;\r\n      else if (currentPos.y > toPos.y) currentPos.y--;\r\n  \r\n      const nextIndex = currentPos.y * boardSize + currentPos.x;\r\n      \r\n      const charAtPos = this.gamePlay.findCharacterByPosition(\r\n        [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n        nextIndex\r\n      );\r\n      \r\n      if (charAtPos) break;\r\n      \r\n      path.push(nextIndex);\r\n      steps++;\r\n    }\r\n  \r\n    return path;\r\n  }\r\n\r\n  async animateMovement(character, path) {\r\n    const originalType = character.type;\r\n    character.type = 'moving';\r\n\r\n    for (let i = 1; i < path.length; i++) {\r\n      const toIndex = path[i];\r\n      this.updateCharacterPosition(character, toIndex);\r\n      this.redrawTeams();\r\n      await new Promise((resolve) => setTimeout(resolve, 200));\r\n    }\r\n\r\n    character.type = originalType;\r\n  }\r\n\r\n  updateCharacterPosition(character, newPosition) {\r\n    console.log(`Updating position for ${character.type} to ${newPosition}`);\r\n    \r\n    if (this.playerTeam.characters.includes(character)) {\r\n      this.positionedPlayerCharacters = this.positionedPlayerCharacters.map(\r\n        (pc) => pc.character === character\r\n          ? new PositionedCharacter(character, newPosition)\r\n          : pc\r\n      );\r\n    } else {\r\n      this.positionedEnemyCharacters = this.positionedEnemyCharacters.map(\r\n        (pc) => pc.character === character\r\n          ? new PositionedCharacter(character, newPosition)\r\n          : pc\r\n      );\r\n    }\r\n    \r\n    const checkPos = this.findPositionByCharacter(\r\n      [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n      character\r\n    );\r\n    console.assert(checkPos === newPosition, \r\n      `Position update failed for ${character.type}! Expected ${newPosition}, got ${checkPos}`);\r\n  }\r\n\r\n  showAttackMenu(attacker, target, targetIndex) {\r\n    const menuItems = [];\r\n\r\n    if (attacker.currentActionPoints >= 1) {\r\n      menuItems.push({\r\n        text: `Атака (1 очко)`,\r\n        action: () =>\r\n          this.performAttack(attacker, target, targetIndex, 'attack'),\r\n      });\r\n    }\r\n\r\n    if (attacker.currentActionPoints >= 2) {\r\n      menuItems.push({\r\n        text: `Сильная атака (2 очка)`,\r\n        action: () =>\r\n          this.performAttack(attacker, target, targetIndex, 'hardAttack'),\r\n      });\r\n    }\r\n\r\n    this.gamePlay.showActionMenu(targetIndex, menuItems, 'attack');\r\n  }\r\n\r\n  showDefenceButton(position) {\r\n    if (!this.selectedCharacter?.currentActionPoints) return;\r\n\r\n    const menuItems = [\r\n      {\r\n        text: `Защита (${this.selectedCharacter.currentActionPoints} очков)`,\r\n        action: () => this.performDefence(this.selectedCharacter),\r\n      },\r\n    ];\r\n\r\n    this.gamePlay.showActionMenu(position, menuItems, 'defence');\r\n  }\r\n\r\n  getPossibleMoves(position, distance) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    const moves = [];\r\n\r\n    for (let row = 0; row < boardSize; row++) {\r\n      for (let col = 0; col < boardSize; col++) {\r\n        const idx = row * boardSize + col;\r\n        const rowDiff = Math.abs(Math.floor(position / boardSize) - row);\r\n        const colDiff = Math.abs((position % boardSize) - col);\r\n\r\n        if (rowDiff + colDiff <= distance && idx !== position) {\r\n          const allChars = [\r\n            ...this.positionedPlayerCharacters,\r\n            ...this.positionedEnemyCharacters,\r\n          ];\r\n          if (!this.gamePlay.findCharacterByPosition(allChars, idx)) {\r\n            moves.push(idx);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return moves;\r\n  }\r\n\r\n  getPossibleAttacks(position, distance) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    const attacks = [];\r\n    const currentTeam =\r\n      this.gameState.currentTurn === 'player'\r\n        ? this.positionedEnemyCharacters\r\n        : this.positionedPlayerCharacters;\r\n\r\n    for (let row = 0; row < boardSize; row++) {\r\n      for (let col = 0; col < boardSize; col++) {\r\n        const idx = row * boardSize + col;\r\n        const rowDiff = Math.abs(Math.floor(position / boardSize) - row);\r\n        const colDiff = Math.abs((position % boardSize) - col);\r\n\r\n        if (rowDiff <= distance && colDiff <= distance && idx !== position) {\r\n          const char = this.gamePlay.findCharacterByPosition(currentTeam, idx);\r\n          if (char) {\r\n            attacks.push(idx);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return attacks;\r\n  }\r\n\r\n  showPossibleActions() {\r\n    if (!this.selectedCharacter) return;\r\n\r\n    this.gamePlay.deselectAllCells();\r\n    const position = this.gamePlay.findPositionByCharacter(\r\n      this.positionedPlayerCharacters,\r\n      this.selectedCharacter\r\n    );\r\n    if (position === null) return;\r\n\r\n    this.gamePlay.selectCell(position, 'yellow');\r\n\r\n    const maxDistance = Math.min(\r\n      this.selectedCharacter.moveDistance,\r\n      this.selectedCharacter.currentActionPoints\r\n    );\r\n\r\n    if (maxDistance > 0) {\r\n      this.getPossibleMoves(position, maxDistance).forEach((idx) =>\r\n        this.gamePlay.selectCell(idx, 'green')\r\n      );\r\n    }\r\n\r\n    this.getPossibleAttacks(\r\n      position,\r\n      this.selectedCharacter.attackDistance\r\n    ).forEach((idx) => this.gamePlay.selectCell(idx, 'red'));\r\n  }\r\n\r\n  async performAttack(attacker, target, targetIndex, attackType) {\r\n    if (!attacker) {\r\n      console.error('Attacker is undefined');\r\n      return;\r\n    }\r\n  \r\n    const attackerPos = this.findPositionByCharacter(\r\n      [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n      attacker\r\n    );\r\n    \r\n    if (attackerPos === null) {\r\n      console.error('Attacker position not found:', attacker);\r\n      this.gamePlay.showError(`${attacker.type}: Не могу найти позицию атакующего!`);\r\n      return;\r\n    }\r\n  \r\n    const distance = attacker.calculateDistance(\r\n      this.indexToPosition(attackerPos),\r\n      this.indexToPosition(targetIndex)\r\n    );\r\n  \r\n    if (distance > attacker.attackDistance) {\r\n      if (attacker.team === 'player') {\r\n        this.gamePlay.showError('Враг слишком далеко!');\r\n      }\r\n      return;\r\n    }\r\n    \r\n    const cost = attackType === 'attack' ? 1 : 2;\r\n    if (attacker.currentActionPoints < cost) {\r\n      this.gamePlay.showError('Недостаточно очков действий!');\r\n      return;\r\n    }\r\n  \r\n    const attack = attacker.actions[attackType]();\r\n    const damage = Math.round(attack.damage);\r\n    \r\n    await this.gamePlay.showDamage(targetIndex, damage, attack.isCritical);\r\n    \r\n    target.takeDamage(damage);\r\n    attacker.currentActionPoints -= attack.cost;\r\n    \r\n    this.gamePlay.hideActionMenu();\r\n    this.redrawTeams();\r\n    \r\n    if (target.health <= 0) {\r\n      this.handleCharacterDeath(target);\r\n    }\r\n    \r\n    if (this.checkTurnEnd()) {\r\n      this.switchTurn();\r\n    }\r\n  }\r\n\r\n  handleCharacterDeath(character) {\r\n    character.die();\r\n    this.gamePlay.showMessage(`${character.type} погиб!`);\r\n    this.redrawTeams();\r\n\r\n    if (this.checkWinConditions()) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  performDefence(character) {\r\n    const defenceBonus = character.currentActionPoints * 5;\r\n    character.defence += defenceBonus;\r\n    character.currentActionPoints = 0;\r\n\r\n    this.gamePlay.showMessage(\r\n      `${character.type} усилил защиту на ${defenceBonus} очков!`\r\n    );\r\n    this.gamePlay.hideActionMenu();\r\n    this.redrawTeams();\r\n    this.updateAvailableActions();\r\n\r\n    if (this.checkTurnEnd()) {\r\n      this.switchTurn();\r\n    }\r\n  }\r\n\r\n  indexToPosition(index) {\r\n    const boardSize = this.gamePlay.boardSize;\r\n    return {\r\n      x: index % boardSize,\r\n      y: Math.floor(index / boardSize),\r\n    };\r\n  }\r\n\r\n  updateActionPointsDisplay() {\r\n    const actionPointsElement = document.getElementById('action-points');\r\n    if (!actionPointsElement) return;\r\n\r\n    let html = '<h3>Очки действий:</h3>';\r\n    this.playerTeam.characters.forEach((char) => {\r\n      html += `<p>${char.type}: ${char.currentActionPoints}/${char.actionPoints}</p>`;\r\n    });\r\n\r\n    actionPointsElement.innerHTML = html;\r\n  }\r\n\r\n  checkTurnEnd() {\r\n    return this.playerTeam.characters\r\n      .filter(c => !c.isDead)\r\n      .every(c => c.currentActionPoints <= 0);\r\n  }\r\n\r\n  async switchTurn() {\r\n    this.gamePlay.deselectAllCells();\r\n    this.gamePlay.hideActionMenu();\r\n  \r\n    if (this.gameState.currentTurn === 'player') {\r\n      this.enemyTeam.characters.forEach((c) => c.resetActionPoints());\r\n    } else {\r\n      this.playerTeam.characters.forEach((c) => c.resetActionPoints());\r\n    }\r\n  \r\n    this.gameState.currentTurn = \r\n      this.gameState.currentTurn === 'player' ? 'enemy' : 'player';\r\n    this.updateTurnIndicator();\r\n  \r\n    if (this.gameState.currentTurn === 'enemy' && !this.isGameLocked) {\r\n      await this.makeEnemyMove();\r\n    }\r\n  }\r\n\r\n  async makeEnemyMove() {\r\n    console.log('Starting enemy move. Current positions:', {\r\n      players: this.positionedPlayerCharacters.map(pc => `${pc.character.type}:${pc.position}`),\r\n      enemies: this.positionedEnemyCharacters.map(pc => `${pc.character.type}:${pc.position}`)\r\n    });\r\n    if (await this.checkWinConditions()) {\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const activeEnemies = this.positionedEnemyCharacters\r\n        .filter(pc => !pc.character.isDead && pc.character.currentActionPoints > 0)\r\n        .sort((a, b) => b.character.attackDistance - a.character.attackDistance);\r\n  \r\n      for (const positionedChar of activeEnemies) {\r\n        const enemy = positionedChar.character;\r\n        const enemyPos = positionedChar.position;\r\n        \r\n        const targets = this.positionedPlayerCharacters\r\n          .filter(pc => !pc.character.isDead)\r\n          .map(pc => ({\r\n            character: pc.character,\r\n            position: pc.position,\r\n            distance: enemy.calculateDistance(\r\n              this.indexToPosition(enemyPos),\r\n              this.indexToPosition(pc.position)\r\n            )\r\n          }));\r\n  \r\n        if (targets.length === 0) continue;\r\n  \r\n        const sortedTargets = targets.sort((a, b) => {\r\n          if (a.distance === b.distance) {\r\n            return a.character.health - b.character.health;\r\n          }\r\n          return a.distance - b.distance;\r\n        });\r\n  \r\n        const attackableTargets = sortedTargets.filter(t => \r\n          t.distance <= enemy.attackDistance\r\n        );\r\n  \r\n        if (attackableTargets.length > 0) {\r\n          await this.performAttack(\r\n            enemy,\r\n            attackableTargets[0].character,\r\n            attackableTargets[0].position,\r\n            'attack'\r\n          );\r\n          if (await this.checkWinConditions()) return;\r\n          continue;\r\n        }\r\n  \r\n        const nearestTarget = sortedTargets[0];\r\n        const path = this.calculatePath(\r\n          enemyPos,\r\n          nearestTarget.position,\r\n          enemy.moveDistance\r\n        );\r\n  \r\n        if (path && path.length > 1) {\r\n          const moveToIndex = path[Math.min(path.length - 1, enemy.moveDistance)];\r\n          const moveCost = this.calculateMoveCost(enemyPos, moveToIndex, enemy);\r\n          \r\n          if (moveCost <= enemy.currentActionPoints) {\r\n            await this.moveEnemyCharacter(enemy, moveToIndex);\r\n            if (await this.checkWinConditions()) return;\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('AI move error:', error);\r\n    } finally {\r\n      this.switchTurn();\r\n    }\r\n  }\r\n\r\n  getAttackTargets(enemy, enemyPos, playerChars) {\r\n    return playerChars.filter((playerChar) => {\r\n      const distance = enemy.calculateDistance(\r\n        this.indexToPosition(enemyPos),\r\n        this.indexToPosition(playerChar.position)\r\n      );\r\n      return distance <= enemy.attackDistance;\r\n    });\r\n  }\r\n\r\n  async moveTowardsNearestPlayer(enemy, enemyPos, playerChars) {\r\n    const nearestPlayer = playerChars.reduce((prev, current) => {\r\n      const prevDistance = enemy.calculateDistance(\r\n        this.indexToPosition(enemyPos),\r\n        this.indexToPosition(prev.position)\r\n      );\r\n      const currentDistance = enemy.calculateDistance(\r\n        this.indexToPosition(enemyPos),\r\n        this.indexToPosition(current.position)\r\n      );\r\n      return currentDistance < prevDistance ? current : prev;\r\n    });\r\n\r\n    const path = this.calculatePath(\r\n      enemyPos,\r\n      nearestPlayer.position,\r\n      enemy.moveDistance\r\n    );\r\n\r\n    if (path && path.length > 1) {\r\n      const moveToIndex = path[Math.min(path.length - 1, enemy.moveDistance)];\r\n      await this.moveEnemyCharacter(enemy, moveToIndex);\r\n    }\r\n  }\r\n\r\n  async moveEnemyCharacter(character, toIndex) {\r\n    try {\r\n      const fromIndex = this.findPositionByCharacter(\r\n        [...this.positionedPlayerCharacters, ...this.positionedEnemyCharacters],\r\n        character\r\n      );\r\n      \r\n      if (fromIndex === null || typeof fromIndex !== 'number') {\r\n        console.error('Cannot find character position before move:', character);\r\n        return false;\r\n      }\r\n  \r\n      const path = this.calculatePath(fromIndex, toIndex, character.moveDistance);\r\n      if (!path || !path.includes(toIndex)) {\r\n        return false;\r\n      }\r\n  \r\n      const moveCost = this.calculateMoveCost(fromIndex, toIndex, character);\r\n      if (moveCost > character.currentActionPoints) {\r\n        return false;\r\n      }\r\n  \r\n      await this.animateMovement(character, path);\r\n      character.currentActionPoints -= moveCost;\r\n      this.updateCharacterPosition(character, toIndex);\r\n      this.redrawTeams();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error in moveEnemyCharacter:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  findPositionByCharacter(positionedCharacters, character) {\r\n    const allPositionedChars = [\r\n      ...this.positionedPlayerCharacters,\r\n      ...this.positionedEnemyCharacters\r\n    ];\r\n    \r\n    const positionedChar = allPositionedChars.find(\r\n      (pc) => pc.character === character\r\n    );\r\n    \r\n    if (!positionedChar) {\r\n      console.error('Character not found:', {\r\n        character,\r\n        allPositionedChars: allPositionedChars.map(pc => ({\r\n          type: pc.character.type,\r\n          position: pc.position,\r\n          isDead: pc.character.isDead\r\n        }))\r\n      });\r\n    }\r\n    \r\n    return positionedChar ? positionedChar.position : null;\r\n  }\r\n}\r\n"],"names":["module","exports","options","element","document","createElement","setAttributes","attributes","insert","___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_IMPORT_3___","___CSS_LOADER_URL_IMPORT_4___","___CSS_LOADER_URL_IMPORT_5___","___CSS_LOADER_URL_IMPORT_6___","___CSS_LOADER_URL_IMPORT_7___","___CSS_LOADER_URL_IMPORT_8___","___CSS_LOADER_URL_IMPORT_9___","___CSS_LOADER_URL_IMPORT_10___","___CSS_LOADER_URL_IMPORT_11___","___CSS_LOADER_URL_IMPORT_12___","___CSS_LOADER_URL_IMPORT_13___","___CSS_LOADER_URL_IMPORT_14___","___CSS_LOADER_URL_IMPORT_15___","___CSS_LOADER_URL_IMPORT_16___","___CSS_LOADER_URL_IMPORT_17___","___CSS_LOADER_URL_IMPORT_18___","___CSS_LOADER_URL_IMPORT_19___","___CSS_LOADER_URL_IMPORT_20___","___CSS_LOADER_URL_IMPORT_21___","___CSS_LOADER_URL_IMPORT_22___","___CSS_LOADER_URL_IMPORT_23___","___CSS_LOADER_URL_IMPORT_24___","___CSS_LOADER_URL_IMPORT_25___","___CSS_LOADER_URL_IMPORT_26___","___CSS_LOADER_URL_IMPORT_27___","___CSS_LOADER_URL_IMPORT_28___","___CSS_LOADER_URL_IMPORT_29___","___CSS_LOADER_URL_IMPORT_30___","___CSS_LOADER_URL_IMPORT_31___","___CSS_LOADER_URL_IMPORT_32___","___CSS_LOADER_URL_IMPORT_33___","___CSS_LOADER_URL_IMPORT_34___","___CSS_LOADER_URL_IMPORT_35___","___CSS_LOADER_URL_IMPORT_36___","___CSS_LOADER_URL_IMPORT_37___","___CSS_LOADER_URL_IMPORT_38___","___CSS_LOADER_URL_IMPORT_39___","___CSS_LOADER_URL_IMPORT_40___","___CSS_LOADER_URL_IMPORT_41___","___CSS_LOADER_URL_IMPORT_42___","___CSS_LOADER_URL_IMPORT_43___","___CSS_LOADER_URL_IMPORT_44___","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","___CSS_LOADER_URL_REPLACEMENT_6___","___CSS_LOADER_URL_REPLACEMENT_7___","___CSS_LOADER_URL_REPLACEMENT_8___","___CSS_LOADER_URL_REPLACEMENT_9___","___CSS_LOADER_URL_REPLACEMENT_10___","___CSS_LOADER_URL_REPLACEMENT_11___","___CSS_LOADER_URL_REPLACEMENT_12___","___CSS_LOADER_URL_REPLACEMENT_13___","___CSS_LOADER_URL_REPLACEMENT_14___","___CSS_LOADER_URL_REPLACEMENT_15___","___CSS_LOADER_URL_REPLACEMENT_16___","___CSS_LOADER_URL_REPLACEMENT_17___","___CSS_LOADER_URL_REPLACEMENT_18___","___CSS_LOADER_URL_REPLACEMENT_19___","___CSS_LOADER_URL_REPLACEMENT_20___","___CSS_LOADER_URL_REPLACEMENT_21___","___CSS_LOADER_URL_REPLACEMENT_22___","___CSS_LOADER_URL_REPLACEMENT_23___","___CSS_LOADER_URL_REPLACEMENT_24___","___CSS_LOADER_URL_REPLACEMENT_25___","___CSS_LOADER_URL_REPLACEMENT_26___","___CSS_LOADER_URL_REPLACEMENT_27___","___CSS_LOADER_URL_REPLACEMENT_28___","___CSS_LOADER_URL_REPLACEMENT_29___","___CSS_LOADER_URL_REPLACEMENT_30___","___CSS_LOADER_URL_REPLACEMENT_31___","___CSS_LOADER_URL_REPLACEMENT_32___","___CSS_LOADER_URL_REPLACEMENT_33___","___CSS_LOADER_URL_REPLACEMENT_34___","___CSS_LOADER_URL_REPLACEMENT_35___","___CSS_LOADER_URL_REPLACEMENT_36___","___CSS_LOADER_URL_REPLACEMENT_37___","___CSS_LOADER_URL_REPLACEMENT_38___","___CSS_LOADER_URL_REPLACEMENT_39___","___CSS_LOADER_URL_REPLACEMENT_40___","___CSS_LOADER_URL_REPLACEMENT_41___","___CSS_LOADER_URL_REPLACEMENT_42___","___CSS_LOADER_URL_REPLACEMENT_43___","___CSS_LOADER_URL_REPLACEMENT_44___","push","id","css","styleElement","styleSheet","cssText","firstChild","removeChild","appendChild","createTextNode","item","content","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceMapping","join","url","String","__esModule","default","test","slice","hash","needQuotes","replace","nonce","setAttribute","stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","idCountMap","identifiers","base","count","indexByIdentifier","obj","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","cssWithMappingToString","toString","this","map","needLayer","modules","dedupe","undefined","alreadyImportedModules","k","_k","memo","style","target","styleTarget","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","insertStyleElement","styleTagTransform","apply","parentNode","removeStyleElement","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","prop","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","currentScript","tagName","toUpperCase","src","scripts","getElementsByTagName","p","b","baseURI","self","href","nc","calcTileType","boardSize","topRightCell","bottomRightCell","bottomLeftCell","locals","Character","constructor","level","type","health","maxHealth","moveDistance","attackDistance","actionPoints","currentActionPoints","team","isDead","levelUp","actions","attack","damage","cost","hardAttack","defence","resurrect","moveCost","straight","diagonal","newHealth","Math","min","improvementFactor","max","round","resetActionPoints","calculateDistance","pos1","pos2","dx","abs","x","dy","y","canAttack","targetPosition","position","getMoveCost","fromIndex","toIndex","fromCol","floor","takeDamage","die","PositionedCharacter","character","Team","characters","generateTeam","allowedTypes","maxLevel","characterCount","generator","RandomCharacter","random","randomLevel","characterGenerator","next","value","GameState","from","object","currentTurn","maxScore","currentLevel","playerTeam","enemyTeam","positionedPlayerCharacters","positionedEnemyCharacters","serialize","safeSerialize","Array","isArray","serialized","keys","forEach","GameStateService","storage","gamePlay","save","state","gameState","setItem","showMessage","error","console","showError","load","parse","getItem","log","Bowman","super","isCritical","Swordsman","Magician","healthRestored","Daemon","Undead","Vampire","container","boardEl","cells","cellClickListeners","cellEnterListeners","cellLeaveListeners","newGameListeners","saveGameListeners","loadGameListeners","bindToDOM","HTMLElement","drawUi","theme","checkBinding","innerHTML","newGameEl","saveGameEl","loadGameEl","addEventListener","event","onNewGameClick","onSaveGameClick","onLoadGameClick","classList","add","cellEl","onCellEnter","onCellLeave","onCellClick","children","updateStats","levelEl","getElementById","scoreEl","textContent","redrawPositions","positions","cell","charEl","healthEl","healthIndicatorEl","width","addCellClickListener","callback","addCellEnterListener","addCellLeaveListener","addNewGameListener","addSaveGameListener","addLoadGameListener","findCharacterByPosition","positionedCharacters","find","c","findPositionByCharacter","positionedChar","preventDefault","indexOf","currentTarget","setCursor","cursorType","cursor","message","errorElement","setTimeout","messageElement","selectCell","color","deselectCell","deselectAllCells","_","hideActionMenu","querySelectorAll","menu","showActionMenu","items","className","button","text","stopPropagation","action","showAttackRange","filter","pc","enemy","showDamage","existingDamage","contains","damageEl","Promise","resolve","once","showCellTooltip","oldTooltip","tooltip","removeCellTooltip","stateService","localStorage","gameCtrl","playerTypes","enemyTypes","maxCharacters","selectedCharacter","selectedCellIndex","isCharacterSelected","movingCharacter","movingPath","themes","checkWinConditions","allEnemiesDead","every","allPlayersDead","score","calculateScore","nextLevel","lockGame","increaseScore","healthPercentage","generateTeams","redrawTeams","resetCharactersActionPoints","updateTurnIndicator","reduce","char","points","isGameLocked","saveGame","loadGame","loadedState","restoreTeam","types","restoredTeam","charData","CharClass","t","name","toLowerCase","restorePositionedCharacter","setupEventListeners","newGame","init","actualCount","positionCharacters","allowedColumns","usedPositions","Set","maxPossible","availablePositions","flatMap","col","row","pos","has","allPositionedCharacters","bind","turnElement","warn","allChars","getAllCharacters","clickedChar","proto","getPrototypeOf","includes","selectCharacter","showAttackMenu","moveCharacter","updateAvailableActions","showPossibleActions","updateActionPointsDisplay","showDefenceButton","path","calculatePath","calculateMoveCost","animateMovement","updateCharacterPosition","checkTurnEnd","switchTurn","fromPos","indexToPosition","toPos","isDiagonal","steps","maxDistance","currentPos","nextIndex","originalType","newPosition","checkPos","assert","attacker","targetIndex","menuItems","performAttack","performDefence","getPossibleMoves","distance","moves","idx","getPossibleAttacks","attacks","currentTeam","rowDiff","colDiff","attackType","attackerPos","handleCharacterDeath","defenceBonus","actionPointsElement","html","makeEnemyMove","players","enemies","activeEnemies","sort","enemyPos","targets","sortedTargets","attackableTargets","nearestTarget","moveToIndex","moveEnemyCharacter","getAttackTargets","playerChars","playerChar","moveTowardsNearestPlayer","nearestPlayer","prev","current","prevDistance","allPositionedChars"],"sourceRoot":""}